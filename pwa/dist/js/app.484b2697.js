(function(t){function e(e){for(var r,o,c=e[0],s=e[1],u=e[2],l=0,f=[];l<c.length;l++)o=c[l],i[o]&&f.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},i={app:0},a=[];function c(t){return s.p+"js/"+({about:"about",categories:"categories",category:"category",offline:"offline",product:"product",settings:"settings",update:"update",updateLoader:"updateLoader"}[t]||t)+"."+{about:"819491f2",categories:"e17e5d19",category:"dceac252",offline:"f8bfec44",product:"a8136637",settings:"d973eae9",update:"bed563ac",updateLoader:"84d03b7d"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={categories:1,category:1,product:1,settings:1,update:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise(function(e,n){for(var r="css/"+({about:"about",categories:"categories",category:"category",offline:"offline",product:"product",settings:"settings",update:"update",updateLoader:"updateLoader"}[t]||t)+"."+{about:"31d6cfe0",categories:"44890468",category:"c5ea35c3",offline:"31d6cfe0",product:"104f8ece",settings:"f94e5f18",update:"b30cc6de",updateLoader:"31d6cfe0"}[t]+".css",i=s.p+r,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return e()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){u=f[c],l=u.getAttribute("data-href");if(l===r||l===i)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||i,a=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete o[t],d.parentNode.removeChild(d),n(a)},d.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(d)}).then(function(){o[t]=0}));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise(function(e,n){r=i[t]=[e,n]});e.push(r[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(t),u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}i[t]=void 0}};var f=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var f=0;f<u.length;f++)e(u[f]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"28ba":function(t,e,n){"use strict";var r=n("d225"),o=n("b0b4"),i=n("bc3a"),a=n.n(i),c=function(){function t(){Object(r["a"])(this,t),this.userAuthToken="5z2laa967cprzgjfh93666476z8e2bql",this.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.userAuthToken)}}return Object(o["a"])(t,null,[{key:"sendNotificationToSelf",value:function(e){return a()({method:"POST",url:t.FIREBASE_API,data:e,headers:t.HEADERS}).then(function(t){console.log(t)}).catch(function(t){console.error("Notification send error: ",t)})}}]),t}();c.FIREBASE_API="https://fcm.googleapis.com/fcm/send",c.HEADERS={"Content-Type":"application/json",Authorization:"key=AAAAx6AX0WQ:APA91bGRzt5nXLXc1E1zvDat51z-Ys0pKlV0N-Uo1WKjfuB4VAJVYDuiVSXEm1PexQ22kPT6bZcrv1EFOs4J9ebMEYRJThX6Z5kBMDfUXQfyscw7-brEsyd9x6ZEWagbsxssecBRsJwF"}},"5c0b":function(t,e,n){"use strict";var r=n("6879"),o=n.n(r);o.a},6081:function(t,e,n){"use strict";n.d(e,"a",function(){return u});n("96cf");var r=n("3b8d"),o=n("d225"),i=n("b0b4"),a=n("bc3a"),c=n.n(a),s=n("8a6d"),u=function(){function t(){Object(o["a"])(this,t),this.userAuthToken="6gg6t6uaref3og36p6ukpqy507smw7c4",this.headers={"Content-Type":"application/json",Credentials:"include",Authorization:"Bearer ".concat(this.userAuthToken)},this.axiosInstance=c.a.create({headers:this.headers})}return Object(i["a"])(t,[{key:"getProductBySKU",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="".concat(t.API_BASE,"/product/").concat(n),e.next=3,fetch(r,{credentials:"omit"}).catch(function(t){return null});case 3:if(o=e.sent,o&&!(o.status<200&&o.status>=400)){e.next=6;break}return e.abrupt("return",o);case 6:return e.next=8,o.json().catch(function(t){return null});case 8:return o=e.sent,e.prev=9,e.abrupt("return",s["a"].fromJSON(o));case 13:return e.prev=13,e.t0=e["catch"](9),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,null,[[9,13]])}));function n(t){return e.apply(this,arguments)}return n}()},{key:"getProductList",value:function(e){var n="".concat(t.PRODUCTS_API,"/?searchCriteria[pageSize]=").concat(e);return this.axiosInstance.get(n).then(function(t){return console.log(t),t.data}).catch(function(t){console.log("MAGENTO ERROR: ",t)})}}]),t}();u.API_BASE="https://pwa.local:8080/api",u.PRODUCTS_API=u.API_BASE+"/products",u.MEDIA_API="https://vuestorefront-demo.phpro.be/pub/media/catalog/product"},6879:function(t,e,n){},"8a6d":function(t,e,n){"use strict";n.d(e,"a",function(){return i});n("7f7f");var r=n("d225"),o=n("b0b4"),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(r["a"])(this,t),this.setSku(e),this.setName(n),this.setPrice(o),this.setCategory(i),this.setMainMedia(a)}return Object(o["a"])(t,null,[{key:"fromJSON",value:function(e){var n=new t(e.sku,e.name,e.price.amt,e.category,e.media[0]);return n}}]),Object(o["a"])(t,[{key:"getSku",value:function(){return this._sku}},{key:"setSku",value:function(t){this._sku=t}},{key:"getName",value:function(){return this._name}},{key:"setName",value:function(t){this._name=t}},{key:"getPrice",value:function(){return this._price}},{key:"setPrice",value:function(t){this._price=t}},{key:"getCategory",value:function(){return this._category}},{key:"setCategory",value:function(t){this._category=t}},{key:"getMainMedia",value:function(){return this._mainMedia}},{key:"setMainMedia",value:function(t){this._mainMedia=t}}]),t}()},"8c89":function(t,e){},"9c93":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.post?n("div",{staticStyle:{padding:"2rem 4rem"}},[n("h3",[t._v(t._s(t.post.getTitle()))]),n("span",[t._v("UID: "+t._s(t.post.getUid()))]),n("br"),n("span",[t._v("Id: "+t._s(t.post.getId()))]),n("br"),n("span",[t._v(t._s(t.post.getBody()))]),n("v-switch",{attrs:{label:"Post cached: "+t.cached.toString()},nativeOn:{click:function(e){return t.toggleCache()}},model:{value:t.cached,callback:function(e){t.cached=e},expression:"cached"}})],1):t._e()},o=[],i=(n("ac6a"),n("06db"),n("c5f6"),n("2f62"),{name:"Post",props:{id:Number},data:function(){return{cached:!1}},computed:{post:function(){var t=this.$store.getters["posts/post"](this.id);return null==t&&this.fetchPost(this.id),t}},methods:{searchCache:function(t){return window.caches.open("img-resources").then(function(e){return e.keys().then(function(e){for(var n=0;n<e.length;++n)if(e[n].url==="https://jsonplaceholder.typicode.com/posts/".concat(t))return!0;return!1})}).catch(function(t){console.error("Error cached",t)})},fetchPost:function(t){this.send_message_to_sw(this.id),this.$store.dispatch("posts/fetchPost",t).then(function(t){console.log("Fetch ok",t)}).catch(function(t){console.error("Fetch error",t)})},send_message_to_sw:function(t){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){return t.pushManager.getSubscription()}).then(function(e){console.log("Sending to SW..."),navigator.serviceWorker.controller.postMessage({data:{dev_comm:!0,id:t}})})},deletePostFromCache:function(){this.send_message_to_sw(this.id)},toggleCache:function(){console.log("Firing for post: ",this.id),this.cached?this.deletePostFromCache():this.fetchPost(this.id),console.log("Post ".concat(this.id,": Cache = ").concat(this.cached))}},created:function(){var t=this,e=this.id;return this.searchCache(e).then(function(e){null!=e&&(t.cached=e)})}}),a=i,c=n("2877"),s=n("6544"),u=n.n(s),l=n("b73d"),f=Object(c["a"])(a,r,o,!1,null,"b9c1c49c",null);e["a"]=f.exports;u()(f,{VSwitch:l["a"]})},be6f:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:"",sm6:"",lg4:""}},[t.product?n("a",{staticStyle:{color:"inherit"},on:{click:function(e){return t._navigate()}}},[n("img",{staticStyle:{"max-width":"400px",width:"100%","max-height":"600px"},attrs:{src:t.product.getMainMedia()}}),n("div",[n("h3",[t._v(t._s(t.product.getName()))]),n("span",{staticStyle:{display:"inline-block"}},[t._v("$"+t._s(t.product.getPrice()))]),n("div",{staticStyle:{display:"inline-block",float:"right",position:"relative",top:"-1.5rem"}},[n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"pink"}},[n("v-icon",{attrs:{dark:""}},[t._v("favorite")])],1),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"teal"}},[n("v-icon",{attrs:{dark:""}},[t._v("add_shopping_cart")])],1)],1)])]):t._e()])},o=[],i=(n("96cf"),n("3b8d")),a=(n("ac6a"),n("06db"),n("6081")),c=(n("8a6d"),new a["a"],{name:"product",props:{sku:String},data:function(){return{cached:!1,product:null}},computed:{},methods:{_navigate:function(){var t="/product/".concat(this.sku);this.$router.push({path:t,query:{t:+new Date}})},searchCache:function(t){return window.caches.open("products-cache").then(function(e){return e.keys().then(function(e){for(var n=0;n<e.length;++n)if(e[n].url==="".concat(a["a"].PRODUCTS_API,"/").concat(t))return!0;return!1})}).catch(function(t){console.error("Error cached",t)})},fetchProduct:function(t){this.send_message_to_sw(this.sku),this.$store.dispatch("products/fetchProduct",t).then(function(t){console.log("Fetch ok",t)}).catch(function(t){console.error("Fetch error",t)})},send_message_to_sw:function(t){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){return t.pushManager.getSubscription()}).then(function(e){console.log("Sending to SW..."),navigator.serviceWorker.controller.postMessage({data:{dev_comm:!0,id:t}})})},deleteProductFromCache:function(){this.send_message_to_sw(this.id)},toggleCache:function(){console.log("Firing for product: ",this.sku),this.cached?this.deleteProductFromCache():this.fetchProduct(this.id),console.log("Product ".concat(this.id,": Cache = ").concat(this.cached))}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=new a["a"],t.next=3,e.getProductBySKU(this.sku);case 3:n=t.sent,n&&(this.product=n);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),s=c,u=n("2877"),l=n("6544"),f=n.n(l),d=n("8336"),h=n("0e8f"),p=n("132d"),g=Object(u["a"])(s,r,o,!1,null,"130376eb",null);e["a"]=g.exports;f()(g,{VBtn:d["a"],VFlex:h["a"],VIcon:p["a"]})},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d"),n("bf40");var r=n("2b0e"),o=n("ce5b"),i=n.n(o),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){return t.callChild()}}}),n("v-toolbar-title",{staticClass:"black--text"},[t._v(t._s(t.pageTitle))]),n("v-spacer"),t.offline?n("v-icon",[t._v("cloud_off")]):t._e(),t.showPWAInstall?n("v-btn",{attrs:{icon:""},on:{click:function(e){return t._firebaseRequestPermission()}}},[n("v-icon",[t._v("get_app")])],1):t._e()],1),n("v-content",[n("Navbar",{ref:"Navbar"}),t.offline?n("v-alert",{attrs:{value:!0,type:"error",icon:"cloud_off",dismissible:""}},[t._v("You are offline. Functionality may be limited.")]):t._e(),n("router-view")],1)],1)},c=[],s=n("5d73"),u=n.n(s),l=n("f499"),f=n.n(l),d=n("795b"),h=n.n(d),p=(n("28a5"),n("f559"),n("7f7f"),n("96cf"),n("3b8d")),g=n("be6f"),v=n("9c93"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",[n("v-list-tile",{attrs:{to:"/"}},[n("v-list-tile-action",[n("v-icon",[t._v("home")])],1),n("v-list-tile-title",[t._v("Home")])],1),n("v-list-group",{attrs:{"prepend-icon":"shopping_basket"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-tile",[n("v-list-tile-title",[t._v("Categories")])],1)]},proxy:!0}])},[n("v-list-group",{attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-tile",[n("v-list-tile-title",[t._v("Women")])],1)]},proxy:!0}])},t._l(t.women,function(e,r){return n("v-list-tile",{key:r,attrs:{to:e[1]}},[n("v-list-tile-title",{domProps:{textContent:t._s(e[0])}}),n("v-list-tile-action")],1)}),1),n("v-list-group",{attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-tile",[n("v-list-tile-title",[t._v("Men")])],1)]},proxy:!0}])},t._l(t.men,function(e,r){return n("v-list-tile",{key:r,attrs:{to:e[1]}},[n("v-list-tile-title",{domProps:{textContent:t._s(e[0])}}),n("v-list-tile-action")],1)}),1)],1),n("v-list-tile",{on:{click:function(e){return t._navigateTo("/about")}}},[n("v-list-tile-action",[n("v-icon",[t._v("account_circle")])],1),n("v-list-tile-title",[t._v("Account")])],1),n("v-list-group",{attrs:{"prepend-icon":"system_update"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-tile",[n("v-list-tile-title",[t._v("Updates")])],1)]},proxy:!0}])},t._l(t.updates,function(e,r){return n("v-list-tile",{key:r,on:{click:function(n){return t._navigateTo(e.path)}}},[n("v-list-tile-action"),n("v-list-tile-title",{domProps:{textContent:t._s(e.title)}})],1)}),1),n("v-list-tile",{on:{click:function(e){return t._navigateTo("/settings")}}},[n("v-list-tile-action",[n("v-icon",[t._v("settings")])],1),n("v-list-tile-title",[t._v("Settings")])],1)],1)],1)},b=[],k={name:"Navbar",data:function(){return{women:[["Tops","/category/Women-Tops"],["Bottoms","/category/Women-Bottoms"]],men:[["Tops","/category/Men-Tops"],["Bottoms","/category/Men-Bottoms"],["Accessories","/category/Men-Accessories"]],updates:[{path:"/update-without-skip-and-claim",title:"Default"},{path:"/update-with-skip-no-claim",title:"Forced"},{path:"/update-with-skip-and-claim",title:"Forced & immediate control"},{path:"/single-client-update",title:"Single Client"},{path:"/multi-client-update",title:"Multi Client"}],drawer:!1}},created:function(){},methods:{_toggleNavbar:function(){this.drawer=!this.drawer},_navigateTo:function(t){window.location=t}}},_=k,y=n("2877"),w=n("6544"),P=n.n(w),S=n("132d"),O=n("8860"),C=n("56b0"),x=n("ba95"),A=n("40fe"),T=n("5d23"),j=n("f774"),E=Object(y["a"])(_,m,b,!1,null,"e166bdcc",null),R=E.exports;P()(E,{VIcon:S["a"],VList:O["a"],VListGroup:C["a"],VListTile:x["a"],VListTileAction:A["a"],VListTileTitle:T["a"],VNavigationDrawer:j["a"]});var I=n("6081"),M=(n("28ba"),n("59ca")),N=(n("741f"),n("a002")),L=n("bc3a"),B=n.n(L),W=(n("8c89"),n("d225")),V=n("b0b4"),D={name:"App",components:{Product:g["a"],Post:v["a"],Navbar:R},data:function(){return{pageTitle:"Home",firebase:{config:{apiKey:"AIzaSyAyGInviSJMCyZV_XHLIRa8fKAt-wsaAJA",authDomain:"pwademo-763.firebaseapp.com",databaseURL:"https://pwademo-763.firebaseio.com",projectId:"pwademo-763",storageBucket:"pwademo-763.appspot.com",messagingSenderId:"857384407396"},messaging:null,token:null},swLib:null,registration:null,serviceWorker:null,service_worker:{refreshing:!1,reloadRequested:!1},lf:null,currentWorker:null,newWorker:null,drawer:"",offline:!navigator.onLine,pwaPrompt:null,showPWAInstall:!1,installed:!1,showNotifications:!0}},computed:{posts:function(){var t=this.$store.getters["posts/allPosts"];return t},products:function(){var t=this.$store.getters["products/allProducts"];return t},firebase_token:function(){}},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.pageTitle=this.$route.name,N["setDriver"]([N["INDEXEDDB"],N["WEBSQL"],N["LOCALSTORAGE"]]).then(function(){N["config"]({name:"Alessio",version:1,size:4980736,storeName:"lf2",description:"some description"})}),this.lf=N["createInstance"]({name:"lf"}),this.lf.setItem("test","kqsdjmqkdfj"),this.sw(),window.addEventListener("online",function(){e._isOffline(!1)}),window.addEventListener("offline",function(){e._isOffline(!0)});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{$route:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e,n){var r,o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this,r=this.$route.path,o=this.$route.name,fetch(r).then(function(t){return console.log("Background fetched: ",r)}).catch(function(t){return console.error(t)}),o?this.pageTitle=o:(o=window.location.pathname,o.startsWith("/")&&(o=o.slice(1)),i=o.split("/"),"category"===i[0]&&(i[0]="Category:"),this.pageTitle=i[0]+" "+i[1]);case 5:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()},methods:{_isOffline:function(t){this.offline=t},_testMethod:function(){this.send_msg_to_sw_with_response({action:"SW"}).then(function(t){return console.log(t)})},callChild:function(){this.$refs.Navbar._toggleNavbar()},_firebaseInit:function(){M["initializeApp"](this.firebase.config),this.firebase.messaging=M["messaging"](),this.firebase.messaging.usePublicVapidKey("BHEX_KV05JO3refzgJbNXaXObnSiCb2kjx1rOsLWhMon4dea2ddfiYD0iLBHm6DsQkVp8sCLr2Ypuuz6haDnOzo")},_firebaseGetToken:function(){var t=this;return t.firebase.messaging.getToken().then(function(e){e?(t.firebase.token=e,t.lf.setItem("token",e).then(function(t){}).catch(function(t){console.error("LocalForage: ",t)})):console.log("No Instance ID token available. Request permission to generate one.")}).catch(function(t){console.log("An error occurred while retrieving token. ",t)})},_firebaseRequestPermission:function(){var t=this;this.firebase.messaging.requestPermission().then(function(){t._firebaseGetToken().then(function(t){})}).catch(function(t){console.log("Unable to get permission to notify.",t)})},firebaseNotificationsHandler:function(){var t=this,e=this;this._firebaseInit(),this._firebaseRequestPermission(),e.firebase.messaging.onTokenRefresh(function(){t._firebaseGetToken(),console.log("TOKEN REFRESHED: ",e.firebase.token)}),e.firebase.messaging.onMessage(function(t){if(console.log("Message received. ",t),"granted"===Notification.permission){var e=new Notification(t.notification.title,{icon:t.notification.icon,body:t.notification.body});return e.onclick=function(){console.log("NOTIFCATION CLICK"),window.open(t.notification.click_action,"_blank")},e}})},send_msg_to_sw_with_response:function(t){return new h.a(function(e,n){var r=new MessageChannel;r.port1.onmessage=function(t){t.data.error?n(t.data.error):e(t.data)},navigator.serviceWorker.controller.postMessage(t,[r.port2])})},pp:function(t,e){return new h.a(function(n,r){var o=new MessageChannel;o.port1.onmessage=function(t){t.data.error?r(t.data.error):n(t.data)},t.postMessage(e,[o.port2])})},send_message_to_sw:function(t){if("serviceWorker"in navigator){var e="Type=".concat(t);this._setCookie("Type",t),this.sw.postMessage({dev_comm:!0,cookie:e})}},request_from_sw:function(){var t=new Request("/update.js"),e={method:"GET"};return fetch(t,e).then(function(e){return{request:t,response:e}}).catch(function(e){return console.error(e),console.error(f()(e)),{request:t,response:response}})},send_new_sw:function(){this.newWorker&&this.newWorker.postMessage({action:"skipWaiting"})},sw:function(){var t=this;window.addEventListener("load",Object(p["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.register("/sw.js").catch(function(t){return console.error("registration failed: ",t)});case 2:t.registration=e.sent,t.serviceWorker=t.registration.active,window.addEventListener("newSW",function(){console.log("newSW arrived")});case 5:case"end":return e.stop()}},e)})))},_navigateTo:function(t,e){this.lf.setItem("buh",e).catch(function(t){console.error(t)}),window.location=t},_setCookie:function(t,e){var n=this._parseDocumentCookies();n=this._setValueOnParsedCookies(n,t,e);this._stringifyParsedCookies(n);document.cookie="".concat(t,"=").concat(e),this.registration.active&&this.registration.active.postMessage({action:"setCookies",cookies:n})},_deteleCookie:function(t){document.cookie="".concat(t,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT")},_parseDocumentCookies:function(){var t=document.cookie;if(""===t)return[];t=document.cookie.split(";");var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=u()(t);!(n=(i=a.next()).done);n=!0){var c=i.value,s=c.split("=");e.push(s)}}catch(l){r=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},_setValueOnParsedCookies:function(t,e,n){for(var r=!1,o=0;o<t.length;++o)t[o][0]===e&&(t[o][1]=n,r=!0);return r||t.push([e,n]),t},_stringifyParsedCookies:function(t){var e="",n=!0,r=!1,o=void 0;try{for(var i,a=u()(t);!(n=(i=a.next()).done);n=!0){var c=i.value;e+="".concat(c[0],"=").concat(c[1],";")}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},myfetch:function(t){var e=new Request("https://pwa.local:8080/api/products/");fetch(e,{credentials:"include"}).catch(function(t){return console.error(t)})}}},F=D,U=(n("5c0b"),n("0798")),$=n("7496"),q=n("8336"),J=n("549c"),z=n("9910"),H=n("71d9"),K=n("706c"),G=n("2a7f"),X=Object(y["a"])(F,a,c,!1,null,null,null),Y=X.exports;P()(X,{VAlert:U["a"],VApp:$["a"],VBtn:q["a"],VContent:J["a"],VIcon:S["a"],VSpacer:z["a"],VToolbar:H["a"],VToolbarSideIcon:K["a"],VToolbarTitle:G["a"]});var Q=n("8c4f"),Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"})},tt=[],et={name:"Home",data:function(){return{strategy:"none",usergroup:"none",flag:!1,sw:null,registration:null}},computed:{},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:window.addEventListener("change",function(t){console.log("productCachePolicy: ",t)}),window.addEventListener("load",Object(p["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.serviceWorker.register("/sw.js").then(function(t){return e.flag=!0,e.sw=t.active,t}).catch(function(t){return console.error("registration failed: ",t)});case 2:e.registration=t.sent;case 3:case"end":return t.stop()}},t)})));case 2:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),methods:{setStrategy:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.registration.active.postMessage({action:"updateProductCachePolicy",policy:this.strategy});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setUserCookie:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:"1"===this.usergroup||"2"===this.usergroup?this._setCookie("User",this.usergroup):this._deteleCookie("User"),this.registration.active.postMessage({action:"setCookies",policy:this.usergroup});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getStrategy:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/sw/productCachePolicy").catch(function(t){return null});case 2:if(e=t.sent,n="none",null==e){t.next=8;break}return t.next=7,e.json().then(function(t){return t.policy}).catch(function(t){return"none"});case 7:n=t.sent;case 8:this.strategy=n;case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),_getStrategy:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.registration.active){t.next=10;break}return t.next=3,fetch("/sw/productCachePolicy").catch(function(t){return null});case 3:if(e=t.sent,n="none",null==e){t.next=9;break}return t.next=8,e.json().then(function(t){return t.policy}).catch(function(t){return"none"});case 8:n=t.sent;case 9:return t.abrupt("return",n);case 10:return t.abrupt("return","none");case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),_setCookie:function(t,e){var n=this._parseDocumentCookies();n=this._setValueOnParsedCookies(n,t,e);this._stringifyParsedCookies(n);document.cookie="".concat(t,"=").concat(e),this.registration.active&&this.registration.active.postMessage({action:"setCookies",cookies:n})},_deteleCookie:function(t){document.cookie="".concat(t,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT")},_parseDocumentCookies:function(){var t=document.cookie;if(""===t)return[];t=document.cookie.split(";");var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=u()(t);!(n=(i=a.next()).done);n=!0){var c=i.value,s=c.split("=");e.push(s)}}catch(l){r=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},_setValueOnParsedCookies:function(t,e,n){for(var r=!1,o=0;o<t.length;++o)t[o][0]===e&&(t[o][1]=n,r=!0);return r||t.push([e,n]),t},_stringifyParsedCookies:function(t){var e="",n=!0,r=!1,o=void 0;try{for(var i,a=u()(t);!(n=(i=a.next()).done);n=!0){var c=i.value;e+="".concat(c[0],"=").concat(c[1],";")}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}}},nt=et,rt=Object(y["a"])(nt,Z,tt,!1,null,null,null),ot=rt.exports,it=n("e6dc");r["default"].use(Q["a"]);var at=new Q["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Home",component:ot},{path:"/settings",name:"Settings",component:function(){return n.e("settings").then(n.bind(null,"26d3"))}},{path:"/offline",name:"Offline",component:function(){return n.e("offline").then(n.bind(null,"2e05"))}},{path:"/products",name:"Products",component:function(){return Promise.resolve().then(n.bind(null,"e6dc"))}},{path:"/pr",name:"Pr",component:it["default"]},{path:"/update-without-skip-and-claim",name:"Default update",component:function(){return n.e("update").then(n.bind(null,"2e8c"))}},{path:"/update-with-skip-no-claim",name:"Forced update",component:function(){return n.e("update").then(n.bind(null,"2e8c"))}},{path:"/update-with-skip-and-claim",name:"Forced update & immediate control",component:function(){return n.e("update").then(n.bind(null,"2e8c"))}},{path:"/single-client-update",name:"Single client update",component:function(){return n.e("update").then(n.bind(null,"2e8c"))}},{path:"/multi-client-update",name:"Multi client update",component:function(){return n.e("update").then(n.bind(null,"2e8c"))}},{path:"/updating",name:"updating",component:function(){return n.e("updateLoader").then(n.bind(null,"4536"))}},{path:"/about",name:"Account",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/categories",component:function(){return n.e("categories").then(n.bind(null,"58c2"))}},{path:"/category/:catName",props:!0,component:function(){return n.e("category").then(n.bind(null,"4886"))}},{path:"/product/:sku",name:"Product",props:!0,component:function(){return n.e("product").then(n.bind(null,"d2f1"))}}]}),ct=at,st=n("2f62"),ut=(n("20d6"),n("75fc")),lt=(n("7514"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(W["a"])(this,t),this.setId(n),this.setUid(e),this.setTitle(r),this.setBody(o)}return Object(V["a"])(t,null,[{key:"fromJSON",value:function(e){var n=new t(e.userId,e.id,e.title,e.body);return n}}]),Object(V["a"])(t,[{key:"getId",value:function(){return this._id}},{key:"setId",value:function(t){this._id=t}},{key:"getUid",value:function(){return this._uid}},{key:"setUid",value:function(t){this._uid=t}},{key:"getTitle",value:function(){return this._title}},{key:"setTitle",value:function(t){this._title=t}},{key:"getBody",value:function(){return this._body}},{key:"setBody",value:function(t){this._body=t}}]),t}()),ft=function(){function t(){Object(W["a"])(this,t),this.API_BASE="https://jsonplaceholder.typicode.com",this.POSTS_API=this.API_BASE+"/posts",this._headers={"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},B.a.create({headers:this._headers})}return Object(V["a"])(t,[{key:"getPost",value:function(t){var e="".concat(this.POSTS_API,"/").concat(t);try{return B.a.get(e).then(function(t){if(200!==t.status&&!navigator.onLine||"Offline"===t.data)throw console.log("Offline"),Error("Offline");if(404!==t.status)return lt.fromJSON(t.data);throw Error("Requested resource does not exit")}).catch(function(t){throw navigator.onLine?(console.log("JSONPlaceholderAPI Error",t),t):Error("Offline")})}catch(n){throw console.log("CATCHING: ",n),n}}},{key:"checkConnection",value:function(){}}]),t}(),dt=new ft,ht={namespaced:!0,state:{posts:[]},getters:{post:function(t){return function(e){return t.posts.find(function(t){return t.getId()===e})}},allPosts:function(t){return t.posts}},actions:{fetchPost:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e,n){var r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,dt.getPost(n);case 3:o=t.sent,r("delPost",o),r("addPost",o);case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),deletePost:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e,n){var r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,dt.getPost(n);case 3:o=t.sent,r("delPost",o);case 5:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},mutations:{addPost:function(t,e){t.posts=[].concat(Object(ut["a"])(t.posts),[e])},delPost:function(t,e){var n=t.posts.findIndex(function(t){return t.getId()===e.getId()});-1!==n&&t.posts.splice(n,1)}}},pt=ht,gt=new I["a"],vt={namespaced:!0,state:{products:[]},getters:{product:function(t){return function(e){return t.products.find(function(t){return t.getSku()===e})}},allProducts:function(t){return t.products},filterProducts:function(t){return function(e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=function(){var e=a.value,r=t.products.find(function(t){return t.getSku()===e});null!=r&&n.push(r)},s=u()(e);!(r=(a=s.next()).done);r=!0)c()}catch(l){o=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}},actions:{fetchProduct:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e,n){var r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,gt.getProductBySKU(n);case 3:if(o=t.sent,null!=o){t.next=6;break}return t.abrupt("return",Error("Failed request"));case 6:return r("removeProduct",o),r("addProduct",o),t.abrupt("return",o);case 9:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),deleteProduct:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e,n){var r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,gt.getProductBySKU(n);case 3:o=t.sent,r("removeProduct",o);case 5:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},mutations:{addProduct:function(t,e){t.products=[].concat(Object(ut["a"])(t.products),[e])},removeProduct:function(t,e){var n=t.products.findIndex(function(t){return t.getSku()===e.getSku()});-1!==n&&t.products.splice(n,1)}}},mt=vt;r["default"].use(st["a"]);var bt=new st["a"].Store({modules:{posts:pt,products:mt},state:{},getters:{},actions:{},mutations:{}}),kt=bt;function _t(){return"serviceWorker"in navigator}r["default"].use(i.a),r["default"].config.productionTip=!1,new r["default"]({router:ct,store:kt,render:function(t){return t(Y)}}).$mount("#app"),_t()},e6dc:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"products-container"},[n("h1",[t._v("Products")]),t._l(t.products,function(t,e){return n("Product",{key:t.getSku(),staticStyle:{display:"inline-block","max-width":"30%","vertical-align":"top"},attrs:{sku:t.getSku()}})})],2)},o=[],i=n("be6f"),a=n("9c93"),c=(n("6081"),{name:"Products",components:{Product:i["a"],Post:a["a"]},data:function(){return{products:null}},computed:{},created:function(){},methods:{fetchPost:function(t){this.$store.dispatch("posts/fetchPost",t).then(function(t){console.log("Fetch ok",t)}).catch(function(t){"Offline"===t.message?console.log("Network error: ",t):console.error("Fetch error",t)})},fetchProduct:function(t){this.$store.dispatch("products/fetchProduct",t).then(function(t){console.log("Fetch ok",t)}).catch(function(t){"Offline"===t.message?console.log("Network error: ",t):console.error("Fetch error",t)})}}}),s=c,u=n("2877"),l=Object(u["a"])(s,r,o,!1,null,"00429822",null);e["default"]=l.exports}});
//# sourceMappingURL=app.484b2697.js.map