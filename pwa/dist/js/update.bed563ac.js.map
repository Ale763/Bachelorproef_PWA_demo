{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VSnackbar/VSnackbar.js","webpack:///./src/views/Update.vue?befa","webpack:///src/views/Update.vue","webpack:///./src/views/Update.vue?72a5","webpack:///./src/views/Update.vue"],"names":["__webpack_require__","_mixins_colorable__WEBPACK_IMPORTED_MODULE_1__","_mixins_toggleable__WEBPACK_IMPORTED_MODULE_2__","_mixins_positionable__WEBPACK_IMPORTED_MODULE_3__","_util_mixins__WEBPACK_IMPORTED_MODULE_4__","__webpack_exports__","Object","extend","name","props","autoHeight","Boolean","multiLine","timeout","type","Number","default","vertical","data","activeTimeout","computed","classes","v-snack--active","this","isActive","v-snack--absolute","absolute","v-snack--auto-height","v-snack--bottom","bottom","top","v-snack--left","left","v-snack--multi-line","v-snack--right","right","v-snack--top","v-snack--vertical","watch","setTimeout","mounted","methods","_this","window","clearTimeout","render","h","attrs","staticClass","class","on","$listeners","setBackgroundColor","color","$slots","_vm","_h","$createElement","_c","_self","staticStyle","margin","padding","text-align","padding-right","_v","_e","update","_m","width","round","dark","click","$event","toggleSW","unregister_sw","model","value","callback","$$v","multiClientUpdate","expression","flat","update_sw","staticRenderFns","display","height","max-width","src","id","Updatevue_type_script_lang_js_","service_worker","newWorker","pageTitle","swName","lf","firebaseToken","multiclient","refreshing","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","key","wrap","_context","prev","next","console","log","location","pathname","localforage","sent","getItem","setItem","install_sw","img","document","createElement","style","getElementById","appendChild","stop","apply","arguments","_install_sw","_callee2","pathName","_context2","abrupt","navigator","serviceWorker","register","scope","then","registration","_updateListener","THIS","addEventListener","reload","err","_this2","waiting","active","_setUpdateStatus","installing","state","controller","unregister","_toggleSW","_callee3","_context3","request_from_sw","_this3","request","Request","concat","requestOptions","method","fetch","response","ready","catch","error","stringify_default","send_new_sw","$emit","postMessage","action","getSWClients","messageChannel","MessageChannel","port1","onmessage","event","message","command","port2","_navigateTo","url","status","views_Updatevue_type_script_lang_js_","component","componentNormalizer","installComponents_default","VBtn","VIcon","VSnackbar"],"mappings":"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","file":"js/update.bed563ac.js","sourcesContent":["import '../../../src/stylus/components/_snackbars.styl';\nimport Colorable from '../../mixins/colorable';\nimport Toggleable from '../../mixins/toggleable';\nimport { factory as PositionableFactory } from '../../mixins/positionable';\nimport mixins from '../../util/mixins';\nexport default mixins(Colorable, Toggleable, PositionableFactory(['absolute', 'top', 'bottom', 'left', 'right'])\n/* @vue/component */\n).extend({\n    name: 'v-snackbar',\n    props: {\n        autoHeight: Boolean,\n        multiLine: Boolean,\n        // TODO: change this to closeDelay to match other API in delayable.js\n        timeout: {\n            type: Number,\n            default: 6000\n        },\n        vertical: Boolean\n    },\n    data: function data() {\n        return {\n            activeTimeout: -1\n        };\n    },\n\n    computed: {\n        classes: function classes() {\n            return {\n                'v-snack--active': this.isActive,\n                'v-snack--absolute': this.absolute,\n                'v-snack--auto-height': this.autoHeight,\n                'v-snack--bottom': this.bottom || !this.top,\n                'v-snack--left': this.left,\n                'v-snack--multi-line': this.multiLine && !this.vertical,\n                'v-snack--right': this.right,\n                'v-snack--top': this.top,\n                'v-snack--vertical': this.vertical\n            };\n        }\n    },\n    watch: {\n        isActive: function isActive() {\n            this.setTimeout();\n        }\n    },\n    mounted: function mounted() {\n        this.setTimeout();\n    },\n\n    methods: {\n        setTimeout: function setTimeout() {\n            var _this = this;\n\n            window.clearTimeout(this.activeTimeout);\n            if (this.isActive && this.timeout) {\n                this.activeTimeout = window.setTimeout(function () {\n                    _this.isActive = false;\n                }, this.timeout);\n            }\n        }\n    },\n    render: function render(h) {\n        return h('transition', {\n            attrs: { name: 'v-snack-transition' }\n        }, this.isActive && [h('div', {\n            staticClass: 'v-snack',\n            class: this.classes,\n            on: this.$listeners\n        }, [h('div', this.setBackgroundColor(this.color, {\n            staticClass: 'v-snack__wrapper'\n        }), [h('div', {\n            staticClass: 'v-snack__content'\n        }, this.$slots.default)])])]);\n    }\n});\n//# sourceMappingURL=VSnackbar.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin\":\"0 auto\",\"padding\":\"1rem\"}},[_c('h2',{staticStyle:{\"text-align\":\"right\"}},[(_vm.update)?_c('div',{staticStyle:{\"color\":\"dodgerblue\"}},[_c('v-icon',{staticStyle:{\"color\":\"dodgerblue\",\"padding-right\":\"1rem\"}},[_vm._v(\"update\")]),_vm._v(\"\\n            Update available\\n        \")],1):_vm._e(),(!_vm.update)?_c('div',{},[_c('v-icon',{staticStyle:{\"padding-right\":\"1rem\"}},[_vm._v(\"update\")]),_vm._v(\"No update available\\n        \")],1):_vm._e()]),_vm._m(0),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}},[_c('v-btn',{attrs:{\"round\":\"\",\"dark\":\"\",\"color\":\"teal\"},on:{\"click\":function($event){return _vm.toggleSW()}}},[_vm._v(\"Update SW\")]),_c('v-btn',{attrs:{\"round\":\"\",\"dark\":\"\",\"color\":\"teal\"},on:{\"click\":function($event){return _vm.unregister_sw()}}},[_vm._v(\"Unregister SW\")])],1),_c('v-snackbar',{attrs:{\"timeout\":0,\"vertical\":true},model:{value:(_vm.multiClientUpdate),callback:function ($$v) {_vm.multiClientUpdate=$$v},expression:\"multiClientUpdate\"}},[_vm._v(\"\\n        A new update is available.\\n        All pages will be reloaded after the update is complete.\\n        Please update.\\n        \"),_c('v-btn',{attrs:{\"dark\":\"\",\"flat\":\"\"},on:{\"click\":_vm.update_sw}},[_vm._v(\"\\n            Update\\n        \")]),_c('v-btn',{attrs:{\"dark\":\"\",\"flat\":\"\"},on:{\"click\":function($event){_vm.multiClientUpdate = false}}},[_vm._v(\"\\n            Close\\n        \")])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"block\",\"text-align\":\"center\"}},[_c('img',{staticStyle:{\"display\":\"block\",\"height\":\"250px\",\"max-width\":\"100%\",\"margin\":\"0 auto\"},attrs:{\"src\":\"/img/horse.png\"}}),_c('div',{staticStyle:{\"display\":\"block\",\"height\":\"250px\",\"max-width\":\"100%\"},attrs:{\"id\":\"imgElement\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n<div style=\"margin: 0 auto; padding: 1rem;\">\n    <h2 style=\"text-align: right\">\n        <div v-if=\"update\" style=\"color: dodgerblue;\">\n            <v-icon style=\"color: dodgerblue;padding-right: 1rem;\">update</v-icon>\n            Update available\n        </div>\n        <div v-if=\"!update\" style>\n            <v-icon style=\"padding-right: 1rem;\">update</v-icon>No update available\n        </div>\n    </h2>\n    <div style=\"display:block;text-align: center\">\n        <img\n        src=\"/img/horse.png\"\n        style=\"display:block; height: 250px; max-width: 100%; margin: 0 auto\"\n      >\n        <div id=\"imgElement\" style=\"display:block; height: 250px; max-width: 100%;\"></div>\n    </div>\n    <div style=\"width: 100%;text-align: center;\">\n        <v-btn round dark color=\"teal\" v-on:click=\"toggleSW()\">Update SW</v-btn>\n        <v-btn round dark color=\"teal\" v-on:click=\"unregister_sw()\">Unregister SW</v-btn>\n    </div>\n    <v-snackbar v-model=\"multiClientUpdate\" :timeout=\"0\" :vertical=true>\n        A new update is available.\n        All pages will be reloaded after the update is complete.\n        Please update.\n        <v-btn dark flat @click=\"update_sw\">\n            Update\n        </v-btn>\n        <v-btn dark flat @click=\"multiClientUpdate = false\">\n            Close\n        </v-btn>\n    </v-snackbar>\n</div>\n</template>\n\n<script>\nimport\n{\n    FirebaseService\n}\nfrom \"../services/FirebaseService\";\nimport * as localForage from \"localforage\";\n\nexport default\n{\n    name: \"Update\",\n    data()\n    {\n        return {\n            service_worker: null,\n            newWorker: null,\n            pageTitle: \"Update\",\n            swName: \"sw.js\",\n            lf: null,\n            firebaseToken: null,\n            update: false,\n            multiclient: false,\n            multiClientUpdate: false,\n            refreshing: false\n        };\n    },\n    computed:\n    {},\n    async created()\n    {\n        console.log(\"Creating Update, \", window.location.pathname);\n        this.lf = await localForage.createInstance(\n        {\n            name: \"lf\"\n        });\n\n        let key = await this.lf.getItem(\"VersionSW\");\n        if (key == null) this.lf.setItem(\"VersionSW\", 0);\n        this.install_sw();\n        setTimeout(() =>\n        {\n            let img = document.createElement(\"img\");\n            img.src = \"/img/horse.png\";\n            img.style = \"max-width: 100%; height: 250px;\";\n            if (document.getElementById(\"imgElement\"))\n            {\n                document.getElementById(\"imgElement\").appendChild(img);\n            }\n        }, 4500);\n    },\n    methods:\n    {\n        async install_sw()\n        {\n            const pathName = window.location.pathname;\n            // console.log(pathName);\n            if (pathName === \"/\") return;\n            let key = await this.lf.getItem(\"VersionSW\");\n            if (key == null) key = 0;\n            if (pathName === \"/update-without-skip-and-claim\")\n            {\n                this.pageTitle = \"Default update\";\n                if (key === 0) this.swName = \"/sw-without-skip-and-claim.js\";\n                else this.swName = \"/sw-without-skip-and-claim-2.js\";\n            }\n            else if (pathName === \"/update-with-skip-no-claim\")\n            {\n                this.pageTitle = \"Forced update\";\n                if (key === 0) this.swName = \"/sw-with-skip-no-claim.js\";\n                else this.swName = \"/sw-with-skip-no-claim-2.js\";\n            }\n            else if (pathName === \"/update-with-skip-and-claim\")\n            {\n                this.pageTitle = \"Forced update & immediate control\";\n                if (key === 0) this.swName = \"/sw-with-skip-and-claim.js\";\n                else this.swName = \"/sw-with-skip-and-claim-2.js\";\n            }\n            else if (pathName === \"/single-client-update\")\n            {\n                this.pageTitle = \"Single Client Update\";\n                if (key === 0) this.swName = \"/sw-single-client-update.js\";\n                else this.swName = \"/sw-single-client-update-2.js\";\n            }\n            else if (pathName === \"/multi-client-update\")\n            {\n                this.pageTitle = \"Multi Client Update\";\n                this.multiclient = true;\n                if (key === 0) this.swName = \"/sw-multi-client-update.js\";\n                else this.swName = \"/sw-multi-client-update-2.js\";\n            }\n            navigator.serviceWorker.register(this.swName,\n            {\n                scope: pathName\n            }).then(registration =>\n                {\n                    this.registration = registration;\n                    this._updateListener();\n\n                    if (this.multiclient)\n                    {\n\n                        let THIS = this;\n                        navigator.serviceWorker.addEventListener('controllerchange',\n                            function ()\n                            {\n                                if (THIS.refreshing) return;\n                                THIS.refreshing = true;\n                                window.location.reload();\n                            }\n                        );\n                    }\n                },\n                err =>\n                {\n                    console.log(\"SW UPDATE_DEMO FAILED: \", err);\n                }\n            );\n        },\n        _updateListener()\n        {\n            // Service worker has installed in the background during a previous page load\n            if (this.registration.waiting && this.registration.active)\n            {\n                this._setUpdateStatus(true);\n                this.newWorker = this.registration.waiting;\n            }\n            else\n            {\n                // Monitor service worker for new version\n                this.registration.addEventListener(\"updatefound\", () =>\n                {\n                    this.newWorker = this.registration.installing;\n\n                    // Monitor controllerchange for when a new version takes over\n                    this.registration.addEventListener('controllerchange', () =>\n                    {\n                        // Remove update available when new service worker activates\n                        this._setUpdateStatus(false);\n                    });\n\n                    // Monitor new service worker for statechanges\n                    this.newWorker.addEventListener(\"statechange\", () =>\n                    {\n                        // Has service worker state changed?\n                        switch (this.newWorker.state)\n                        {\n                            case \"installed\":\n                                // There is a new service worker available, show the notification\n                                console.log(\"SW DETECTING UPDATE 2\");\n                                this._setUpdateStatus(true);\n                                break;\n                            case \"activated\":\n                                // There is a new service worker available, show the notification\n                                if (navigator.serviceWorker.controller)\n                                {\n                                    console.log(\"SW ACTIVATED\");\n                                    this._setUpdateStatus(false);\n                                }\n                                if (this.lf.getItem(\"updating\"))\n                                {\n                                    // window.location.reload();\n                                }\n                                break;\n                        }\n                    });\n                });\n            }\n        },\n        unregister_sw()\n        {\n            this.registration.unregister().then(() =>\n            {\n                console.log(\"Unregister\");\n            });\n        },\n        async toggleSW()\n        {\n            this.lf.setItem(\"UAV\", true);\n            let key = await this.lf.getItem(\"VersionSW\");\n            if (key === 1 || key == null)\n            {\n                this.lf.setItem(\"VersionSW\", 0);\n            }\n            else\n            {\n                this.lf.setItem(\"VersionSW\", 1);\n            }\n            this.registration.update();\n        },\n        request_from_sw()\n        {\n            const pathName = window.location.pathname;\n            this.registration.update();\n            let request = new Request(`/${this.swName}`);\n            const requestOptions = {\n                method: \"GET\"\n            };\n            return fetch(request, requestOptions)\n                .then(response =>\n                {\n                    navigator.serviceWorker\n                        .register(this.swName,\n                        {\n                            scope: pathName\n                        })\n                        .then(\n                            registration =>\n                            {\n                                this.registration = registration;\n                            },\n                            err =>\n                            {\n                                console.log(\"SW UPDATE_DEMO FAILED: \", err);\n                            }\n                        )\n                        .then(() =>\n                        {\n                            this.service_worker = navigator.serviceWorker;\n                            return navigator.serviceWorker.ready;\n                        });\n                    return response;\n                })\n\n                .catch(error =>\n                {\n                    console.error(error);\n                    console.error(JSON.stringify(error));\n                    return {\n                        request: request,\n                        response: response\n                    };\n                });\n        },\n        send_new_sw()\n        {\n            this.$emit(\"updateRequest\");\n        },\n\n        update_sw()\n        {\n            this.newWorker.postMessage(\n            {\n                action: 'skipWaiting'\n            });\n        },\n        getSWClients()\n        {\n            if (navigator.serviceWorker.controller)\n            {\n                var messageChannel = new MessageChannel();\n                messageChannel.port1.onmessage = function (event)\n                {\n                    console.log(\"Response from the SW : \", event.data.message);\n                };\n                console.log(\"Sending message to the service worker\");\n                navigator.serviceWorker.controller.postMessage(\n                    {\n                        command: \"twoWayCommunication\",\n                        message: \"Hi, SW\"\n                    },\n                    [messageChannel.port2]\n                );\n            }\n            else\n            {\n                console.log(\"No active ServiceWorker\");\n            }\n        },\n        _navigateTo(url)\n        {\n            window.location = url;\n        },\n        _setUpdateStatus(status)\n        {\n            if (this.registration.active)\n            {\n                this.update = status;\n                if (this.multiclient)\n                    this.multiClientUpdate = status;\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Update.vue?vue&type=template&id=59e3858a&scoped=true&\"\nimport script from \"./Update.vue?vue&type=script&lang=js&\"\nexport * from \"./Update.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59e3858a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VSnackbar } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VIcon,VSnackbar})\n"],"sourceRoot":""}