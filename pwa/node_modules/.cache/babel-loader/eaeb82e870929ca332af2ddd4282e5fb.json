{"remainingRequest":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/src/views/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ale/Documents/Bachproef/pwa-3/src/views/Category.vue","mtime":1560449932209},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _getIterator from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/core-js/get-iterator\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Product from \"../components/Product\";\nimport { MagentoAPIService } from \"../services/MagentoAPIService\";\nexport default {\n  name: \"Category\",\n  components: {\n    Product: Product\n  },\n  props: {},\n  data: function data() {\n    return {\n      catId: '',\n      categorIndex: {\n        'Women-Tops': {\n          'products': ['WT09-XS-Purple', 'WT08-XS-Purple', 'WT07-XS-Green', 'WT06-S-Red', 'WT05-M-Orange', 'WT04-L-Blue']\n        },\n        'Women-Bottoms': {\n          'products': ['WSH12-28-Green', 'WSH11-28-Red', 'WSH10-28-Black', 'WSH09-28-Green', 'WSH08-28-Purple', 'WSH07-28-Black']\n        },\n        'Men-Tops': {\n          'products': ['MT12-XL-Blue', 'MT11-M-Blue', 'MT10-XS-Yellow']\n        },\n        'Men-Bottoms': {\n          'products': ['MSH12-32-Red', 'MSH11-34-Black', 'MSH10-36-Green', 'PA01']\n        },\n        'Men-Accessories': {\n          'products': ['MA01', 'MA02']\n        }\n      },\n      offline: false,\n      loaded: false,\n      products: null,\n      noProducts: false\n    };\n  },\n  computed: {\n    /*         posts: function ()\n            {\n                let posts = this.$store.getters['posts/allPosts'];\n                // console.log(\"All Posts: \", posts);\n                return posts;\n            },\n            products: function ()\n            {\n                let index = this.categorIndex[this.catId]['products'];\n                let filteredProducts = this.$store.getters['products/filterProducts'](index);\n                if (filteredProducts == null)\n                {\n                    return [];\n                }\n                this.loaded = true;\n                return filteredProducts;\n            } */\n  },\n  created: function created() {\n    this.setPageCategory(this.$route.params.catName);\n    this.loadCategoryProducts();\n  },\n  methods: {\n    testNoProducts: function testNoProducts() {\n      if (this.loaded && (this.products == null || this.products === [])) {\n        return true;\n      }\n\n      return false;\n    },\n    getPageCategory: function getPageCategory() {},\n    setPageCategory: function setPageCategory(category) {\n      this.catId = category;\n    },\n    fetchProduct: function fetchProduct(sku) {\n      return this.$store.dispatch('products/fetchProduct', sku).then(function (data) {\n        return data;\n      }).catch(function (error) {\n        if (!navigator.onLine) {} else if (error.message === \"Offline\") {\n          console.log(\"Network error: \", error);\n        } else console.error('Fetch error', error);\n      });\n    },\n    loadCategoryProducts: function () {\n      var _loadCategoryProducts = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var magentoService, result, categoryProducts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, productSKU, product;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                magentoService = new MagentoAPIService();\n                result = [];\n                categoryProducts = this.categorIndex[this.catId]['products'];\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context.prev = 6;\n                _iterator = _getIterator(categoryProducts);\n\n              case 8:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context.next = 17;\n                  break;\n                }\n\n                productSKU = _step.value;\n                _context.next = 12;\n                return magentoService.getProductBySKU(productSKU);\n\n              case 12:\n                product = _context.sent;\n                if (product) result.push(product); // result.push(this.fetchProduct(productSKU));\n\n              case 14:\n                _iteratorNormalCompletion = true;\n                _context.next = 8;\n                break;\n\n              case 17:\n                _context.next = 23;\n                break;\n\n              case 19:\n                _context.prev = 19;\n                _context.t0 = _context[\"catch\"](6);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 23:\n                _context.prev = 23;\n                _context.prev = 24;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 26:\n                _context.prev = 26;\n\n                if (!_didIteratorError) {\n                  _context.next = 29;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 29:\n                return _context.finish(26);\n\n              case 30:\n                return _context.finish(23);\n\n              case 31:\n                this.loaded = true;\n                this.products = result;\n                this.noProducts = this.testNoProducts();\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[6, 19, 23, 31], [24,, 26, 30]]);\n      }));\n\n      function loadCategoryProducts() {\n        return _loadCategoryProducts.apply(this, arguments);\n      }\n\n      return loadCategoryProducts;\n    }()\n  },\n  watch: {\n    $route: function $route(to, from) {\n      this.setPageCategory(to.path.split('/category/')[1]);\n      this.loadCategoryProducts();\n      console.log(\"Category route change\");\n      var pageURL = this.$route.path;\n      fetch(pageURL).then(function (resp) {\n        return console.log(\"Background fetched: \", pageURL);\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    }\n  }\n};",{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div class=\"category\">\n    <v-container grid-list-md>\n        <v-layout v-if=\"offline\" row wrap align-center red style=\"width: 109%;\n    margin: 0px;\n    position: relative;\n    left: -16px;\n    color: white;\n    top: -16px;\">\n            <v-flex xs2 style=\"text-align: center;\">\n                <v-icon color=\"white\">cloud_off</v-icon>\n            </v-flex>\n            <v-flex xs10>\n                <h2>No network connection. Functionality is limited.</h2>\n            </v-flex>\n        </v-layout>\n        <!-- <h1>Category: {{ this.catId }}</h1> -->\n        <v-layout row fill-height wrap>\n\t\t\t<v-flex xs12 style=\"text-align:center;\">\n\n            <div v-if=\"!loaded\">Loading....</div>\n\t\t\t<div v-if=\"noProducts\">This category is empty</div>\n\t\t\t</v-flex>\n            <Product v-for=\"(product, index) in products\" v-if=\"product\" :sku=\"product.getSku()\" :key=\"product.getSku()\" style=\"display: inline-block;\" />\n        </v-layout>\n\n    </v-container>\n</div>\n</template>\n\n<script>\nimport Product from \"../components/Product\";\n\nimport\n{\n    MagentoAPIService\n}\nfrom \"../services/MagentoAPIService\";\n\nexport default\n{\n    name: \"Category\",\n    components:\n    {\n        Product,\n    },\n    props:\n    {},\n    data()\n    {\n        return {\n            catId: '',\n            categorIndex:\n            {\n                'Women-Tops':\n                {\n\t\t\t\t\t'products': ['WT09-XS-Purple', 'WT08-XS-Purple', 'WT07-XS-Green', 'WT06-S-Red',\n\t\t\t\t\t 'WT05-M-Orange', 'WT04-L-Blue']\n\n                },\n                'Women-Bottoms':\n                {\n                    'products': ['WSH12-28-Green', 'WSH11-28-Red', 'WSH10-28-Black', 'WSH09-28-Green',\n                        'WSH08-28-Purple', 'WSH07-28-Black'\n                    ]\n                },\n                'Men-Tops':\n                {\n                    'products': ['MT12-XL-Blue', 'MT11-M-Blue', 'MT10-XS-Yellow']\n                },\n                'Men-Bottoms':\n                {\n                    'products': ['MSH12-32-Red', 'MSH11-34-Black', 'MSH10-36-Green', 'PA01']\n                },\n                'Men-Accessories':\n                {\n                    'products': ['MA01', 'MA02']\n                },\n            },\n            offline: false,\n            loaded: false,\n\t\t\tproducts: null,\n\t\t\tnoProducts: false\n        }\n    },\n    computed:\n    {\n        /*         posts: function ()\n                {\n                    let posts = this.$store.getters['posts/allPosts'];\n                    // console.log(\"All Posts: \", posts);\n                    return posts;\n                },\n                products: function ()\n                {\n                    let index = this.categorIndex[this.catId]['products'];\n                    let filteredProducts = this.$store.getters['products/filterProducts'](index);\n                    if (filteredProducts == null)\n                    {\n                        return [];\n                    }\n                    this.loaded = true;\n                    return filteredProducts;\n                } */\n    },\n    created()\n    {\n        this.setPageCategory(this.$route.params.catName);\n        this.loadCategoryProducts();\n    },\n    methods:\n    {\n\t\ttestNoProducts()\n\t\t{\n\t\t\tif (this.loaded && (this.products == null || this.products === []))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n        getPageCategory()\n        {},\n        setPageCategory(category)\n        {\n            this.catId = category;\n        },\n        fetchProduct(sku)\n        {\n            return this.$store.dispatch('products/fetchProduct', sku)\n                .then((data) =>\n                {\n                    return data;\n                })\n                .catch((error) =>\n                {\n                    if (!navigator.onLine)\n                    {\n                    }\n                    else if (error.message === \"Offline\")\n                    {\n                        console.log(\"Network error: \", error)\n                    }\n                    else\n                        console.error('Fetch error', error);\n                });\n        },\n        async loadCategoryProducts()\n        {\n            let magentoService = new MagentoAPIService();\n            let result = [];\n            const categoryProducts = this.categorIndex[this.catId]['products'];\n            for (let productSKU of categoryProducts)\n            {\n\t\t\t\tlet product = await magentoService.getProductBySKU(productSKU);\n\t\t\t\tif (product)\n                \tresult.push(product);\n                // result.push(this.fetchProduct(productSKU));\n\t\t\t}\n\t\t\tthis.loaded = true;\n\t\t\tthis.products = result;\n\t\t\tthis.noProducts = this.testNoProducts();\n        }\n\n    },\n    watch:\n    {\n        $route(to, from)\n        {\n            this.setPageCategory(to.path.split('/category/')[1]);\n            this.loadCategoryProducts();\n            console.log(\"Category route change\");\n\n            let pageURL = this.$route.path;\n            fetch(pageURL).then(resp => console.log(\"Background fetched: \", pageURL)).catch(err => console.error(err));\n        }\n    }\n}\n</script>\n\n<style scoped>\n.category {\n    /*max-width: 1000px;*/\n    margin: 0 auto;\n}\n\n@media only screen and (max-width: 960px) {\n    .my-offset-xs1 {\n        margin: 0 8.333333333333%;\n    }\n\n}\n</style>\n"],"sourceRoot":"src/views"}]}