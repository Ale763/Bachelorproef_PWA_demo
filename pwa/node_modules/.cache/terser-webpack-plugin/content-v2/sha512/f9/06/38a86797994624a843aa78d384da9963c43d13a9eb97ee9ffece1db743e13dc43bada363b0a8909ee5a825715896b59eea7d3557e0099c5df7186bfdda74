{"map":"{\"version\":3,\"sources\":[\"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"432a83d8-vue-loader-template\\\"}!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/src/views/Update.vue?vue&type=template&id=14b8aa98&scoped=true&\",\"src/views/Update.vue\",\"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/loaders/pitcher.js??ref--0!/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js??ref--12-0!/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/src/views/Update.vue?vue&type=script&lang=js&\",\"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/src/views/Update.vue\"],\"names\":[\"render\",\"_vm\",\"this\",\"_h\",\"$createElement\",\"_c\",\"_self\",\"staticStyle\",\"margin\",\"padding\",\"_v\",\"_s\",\"pageTitle\",\"text-align\",\"color\",\"padding-right\",\"_e\",\"update\",\"_m\",\"width\",\"attrs\",\"round\",\"dark\",\"on\",\"click\",\"$event\",\"toggleSW\",\"unregister_sw\",\"staticRenderFns\",\"display\",\"height\",\"max-width\",\"src\",\"id\",\"Updatevue_type_script_lang_js_\",\"name\",\"data\",\"service_worker\",\"newWorker\",\"swName\",\"lf\",\"firebaseToken\",\"computed\",\"created\",\"_created\",\"Object\",\"asyncToGenerator\",\"regeneratorRuntime\",\"mark\",\"_callee\",\"key\",\"_this\",\"wrap\",\"_context\",\"prev\",\"next\",\"console\",\"log\",\"window\",\"location\",\"pathname\",\"localforage\",\"sent\",\"getItem\",\"setItem\",\"install_sw\",\"setTimeout\",\"img\",\"document\",\"createElement\",\"style\",\"getElementById\",\"appendChild\",\"addEventListener\",\"postMessage\",\"action\",\"stop\",\"apply\",\"arguments\",\"methods\",\"_install_sw\",\"_callee2\",\"pathName\",\"_this2\",\"_context2\",\"abrupt\",\"navigator\",\"serviceWorker\",\"register\",\"scope\",\"then\",\"registration\",\"_updateListener\",\"err\",\"_this3\",\"waiting\",\"active\",\"installing\",\"state\",\"_callee3\",\"_context3\",\"controller\",\"unregister\",\"_toggleSW\",\"_callee4\",\"_context4\",\"request_from_sw\",\"_this4\",\"request\",\"Request\",\"concat\",\"requestOptions\",\"method\",\"fetch\",\"response\",\"ready\",\"catch\",\"error\",\"stringify_default\",\"send_new_sw\",\"$emit\",\"getSWClients\",\"messageChannel\",\"MessageChannel\",\"port1\",\"onmessage\",\"event\",\"message\",\"command\",\"port2\",\"_navigateTo\",\"url\",\"views_Updatevue_type_script_lang_js_\",\"component\",\"componentNormalizer\",\"__webpack_exports__\",\"installComponents_default\",\"VBtn\",\"VIcon\"],\"mappings\":\"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\",\"sourcesContent\":[\"var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\\\"margin\\\":\\\"0 auto\\\",\\\"padding\\\":\\\"1rem\\\"}},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))]),_c('h2',{staticStyle:{\\\"text-align\\\":\\\"right\\\"}},[(_vm.update)?_c('div',{staticStyle:{\\\"color\\\":\\\"dodgerblue\\\"}},[_c('v-icon',{staticStyle:{\\\"color\\\":\\\"dodgerblue\\\",\\\"padding-right\\\":\\\"1rem\\\"}},[_vm._v(\\\"update\\\")]),_vm._v(\\\"Update\\\\n      available\\\\n    \\\")],1):_vm._e(),(!_vm.update)?_c('div',{},[_c('v-icon',{staticStyle:{\\\"padding-right\\\":\\\"1rem\\\"}},[_vm._v(\\\"update\\\")]),_vm._v(\\\"No update available\\\\n    \\\")],1):_vm._e()]),_vm._m(0),_c('div',{staticStyle:{\\\"width\\\":\\\"100%\\\",\\\"text-align\\\":\\\"center\\\"}},[_c('v-btn',{attrs:{\\\"round\\\":\\\"\\\",\\\"dark\\\":\\\"\\\",\\\"color\\\":\\\"teal\\\"},on:{\\\"click\\\":function($event){return _vm.toggleSW()}}},[_vm._v(\\\"Update SW\\\")]),_c('v-btn',{attrs:{\\\"round\\\":\\\"\\\",\\\"dark\\\":\\\"\\\",\\\"color\\\":\\\"teal\\\"},on:{\\\"click\\\":function($event){return _vm.unregister_sw()}}},[_vm._v(\\\"Unregister SW\\\")])],1)])}\\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\\\"display\\\":\\\"block\\\",\\\"text-align\\\":\\\"center\\\"}},[_c('img',{staticStyle:{\\\"display\\\":\\\"block\\\",\\\"height\\\":\\\"250px\\\",\\\"max-width\\\":\\\"100%\\\",\\\"margin\\\":\\\"0 auto\\\"},attrs:{\\\"src\\\":\\\"/img/horse.png\\\"}}),_c('div',{staticStyle:{\\\"display\\\":\\\"block\\\",\\\"height\\\":\\\"250px\\\",\\\"max-width\\\":\\\"100%\\\"},attrs:{\\\"id\\\":\\\"imgElement\\\"}})])}]\\n\\nexport { render, staticRenderFns }\",\"<template>\\n  <div style=\\\"margin: 0 auto; padding: 1rem;\\\">\\n    <h1>{{ pageTitle }}</h1>\\n\\n    <h2 style=\\\"text-align: right\\\">\\n      <div v-if=\\\"update\\\" style=\\\"color: dodgerblue;\\\">\\n        <v-icon style=\\\"color: dodgerblue;padding-right: 1rem;\\\">update</v-icon>Update\\n        available\\n      </div>\\n      <div v-if=\\\"!update\\\" style>\\n        <v-icon style=\\\"padding-right: 1rem;\\\">update</v-icon>No update available\\n      </div>\\n    </h2>\\n\\n    <!--        <a style=\\\"\\\"-->\\n    <!--           v-on:click=\\\"toggleSW()\\\">Change SW-->\\n    <!--        </a>-->\\n    <!--        <a style=\\\"\\\"-->\\n    <!--           v-on:click=\\\"unregister_sw()\\\">UNREGISTER-->\\n    <!--        </a>-->\\n    <div style=\\\"display:block;text-align: center\\\">\\n      <img\\n        src=\\\"/img/horse.png\\\"\\n        style=\\\"display:block; height: 250px; max-width: 100%; margin: 0 auto\\\"\\n      >\\n      <div id=\\\"imgElement\\\" style=\\\"display:block; height: 250px; max-width: 100%;\\\"></div>\\n    </div>\\n    <div style=\\\"width: 100%;text-align: center;\\\">\\n      <v-btn round dark color=\\\"teal\\\" v-on:click=\\\"toggleSW()\\\">Update SW</v-btn>\\n      <v-btn round dark color=\\\"teal\\\" v-on:click=\\\"unregister_sw()\\\">Unregister SW</v-btn>\\n    </div>\\n  </div>\\n</template>\\n\\n<script>\\nimport { FirebaseService } from \\\"../services/FirebaseService\\\";\\nimport * as localForage from \\\"localforage\\\";\\n\\nexport default {\\n  name: \\\"Update\\\",\\n  data() {\\n    return {\\n      service_worker: null,\\n      newWorker: null,\\n      pageTitle: \\\"Update\\\",\\n      swName: \\\"sw.js\\\",\\n      lf: null,\\n      firebaseToken: null,\\n      update: false\\n    };\\n  },\\n  computed: {},\\n  async created() {\\n    console.log(\\\"Creating Update, \\\", window.location.pathname);\\n    this.lf = await localForage.createInstance({ name: \\\"lf\\\" });\\n    let key = await this.lf.getItem(\\\"VersionSW\\\");\\n    if (key == null) this.lf.setItem(\\\"VersionSW\\\", 0);\\n    this.install_sw();\\n    setTimeout(() => {\\n      let img = document.createElement(\\\"img\\\");\\n      img.src = \\\"/img/horse.png\\\";\\n      img.style = \\\"max-width: 100%; height: 250px;\\\";\\n      if (document.getElementById(\\\"imgElement\\\")) {\\n        document.getElementById(\\\"imgElement\\\").appendChild(img);\\n      }\\n\\t}, 2500);\\n\\t\\n\\twindow.addEventListener(\\\"beforeunload\\\", () => \\n\\t{\\n\\t\\tconsole.log('BeforeUnload');\\n\\t\\tif(this.update)\\n\\t\\t{\\n\\t\\t\\tthis.newWorker.postMessage({ action: \\\"skipWaiting\\\" });\\n\\t\\t}\\n\\t});\\n  },\\n  methods: {\\n    async install_sw() {\\n      const pathName = window.location.pathname;\\n      // console.log(pathName);\\n      if (pathName === \\\"/\\\") return;\\n      let key = await this.lf.getItem(\\\"VersionSW\\\");\\n      if (key == null) key = 0;\\n\\n      if (pathName === \\\"/update-without-skip-and-claim\\\") {\\n        this.pageTitle = \\\"Default update\\\";\\n\\n        if (key === 0) this.swName = \\\"/sw-without-skip-and-claim.js\\\";\\n        else this.swName = \\\"/sw-without-skip-and-claim-2.js\\\";\\n      } else if (pathName === \\\"/update-with-skip-no-claim\\\") {\\n        this.pageTitle = \\\"Forced update\\\";\\n        if (key === 0) this.swName = \\\"/sw-with-skip-no-claim.js\\\";\\n        else this.swName = \\\"/sw-with-skip-no-claim-2.js\\\";\\n      } else if (pathName === \\\"/update-with-skip-and-claim\\\") {\\n        this.pageTitle = \\\"Forced update & immediate control\\\";\\n        if (key === 0) this.swName = \\\"/sw-with-skip-and-claim.js\\\";\\n        else this.swName = \\\"/sw-with-skip-and-claim-2.js\\\";\\n      } else if (pathName === \\\"/single-client-update\\\") {\\n        this.pageTitle = \\\"Single Client Update\\\";\\n        if (key === 0) this.swName = \\\"/sw-single-client-update.js\\\";\\n        else this.swName = \\\"/sw-single-client-update-2.js\\\";\\n      } else if (pathName === \\\"/multi-client-update\\\") {\\n        this.pageTitle = \\\"Multi Client Update\\\";\\n        if (key === 0) this.swName = \\\"/sw-multi-client-update.js\\\";\\n        else this.swName = \\\"/sw-multi-client-update-2.js\\\";\\n      }\\n\\n      navigator.serviceWorker.register(this.swName, { scope: pathName }).then(\\n        registration => {\\n          this.registration = registration;\\n          this._updateListener();\\n        },\\n        err => {\\n          console.log(\\\"SW UPDATE_DEMO FAILED: \\\", err);\\n        }\\n      );\\n    },\\n    _updateListener() {\\n\\t  if (this.registration.waiting && this.registration.active) \\n\\t  {\\n\\t\\t  console.log(\\\"SW DETECTING UPDATE 1\\\");\\n\\t\\t  this.update = true;\\n\\t\\t  this.newWorker = registration.waiting;\\n\\t  } else \\n\\t  {\\n\\t\\t  this.registration.addEventListener(\\\"updatefound\\\", () => \\n\\t\\t  {\\n\\t\\t\\tthis.newWorker = this.registration.installing;\\n\\t\\t\\tthis.newWorker.addEventListener(\\\"statechange\\\", () => \\n\\t\\t\\t{\\n\\t\\t\\t\\t// Has service worker state changed?\\n\\t\\t\\t\\tswitch (this.newWorker.state) \\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tcase \\\"installed\\\":\\n\\t\\t\\t\\t\\t\\t// There is a new service worker available, show the notification\\n\\t\\t\\t\\t\\t\\twindow.addEventListener(\\\"beforeunload\\\", async () => \\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tif (navigator.serviceWorker.controller) \\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t// var messageChannel = new MessageChannel();\\n\\t\\t\\t\\t\\t\\t\\t\\t// messageChannel.port1.onmessage = function(event) \\n\\t\\t\\t\\t\\t\\t\\t\\t// {\\n\\t\\t\\t\\t\\t\\t\\t\\t// \\tif (event.data.lastRemainingClient)\\n\\t\\t\\t\\t\\t\\t\\t\\t// \\t\\tthis.newWorker.skipWaiting();\\n\\t\\t\\t\\t\\t\\t\\t\\t// };\\n\\t\\t\\t\\t\\t\\t\\t\\t// console.log(\\\"Sending message to the service worker\\\");\\n\\t\\t\\t\\t\\t\\t\\t\\t// navigator.serviceWorker.controller.postMessage(\\n\\t\\t\\t\\t\\t\\t\\t\\t//   { action: \\\"skipWaiting\\\" },\\n\\t\\t\\t\\t\\t\\t\\t\\t//   [messageChannel.port2]\\n\\t\\t\\t\\t\\t\\t\\t\\t// );\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.newWorker.postMessage({ action: \\\"skipWaiting\\\" });\\n\\t\\t\\t\\t\\t\\t\\t} \\n\\t\\t\\t\\t\\t\\t\\telse \\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tconsole.log(\\\"No active ServiceWorker\\\");\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\t\\tif (navigator.serviceWorker.controller) \\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(\\\"SW DETECTING UPDATE 2\\\");\\n\\t\\t\\t\\t\\t\\t\\tthis.update = true;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\tcase \\\"activated\\\":\\n\\t\\t\\t\\t\\t// There is a new service worker available, show the\\n\\t\\t\\t\\t\\t// notification\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tif (navigator.serviceWorker.controller) {\\n\\t\\t\\t\\t\\tconsole.log(\\\"SW ACTIVATED\\\");\\n\\t\\t\\t\\t\\t// window.location.reload();\\n\\t\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\t\\tthis.update = false;\\n\\t\\t\\t\\t\\t}, 2500);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tif (this.lf.getItem(\\\"updating\\\")) {\\n\\t\\t\\t\\t\\t// window.location.reload();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n        });\\n      }\\n    },\\n    unregister_sw() {\\n      this.registration.unregister().then(() => {\\n        console.log(\\\"Unregister\\\");\\n      });\\n    },\\n    async toggleSW() {\\n      this.lf.setItem(\\\"UAV\\\", true);\\n      let key = await this.lf.getItem(\\\"VersionSW\\\");\\n      if (key === 1 || key == null) {\\n        this.lf.setItem(\\\"VersionSW\\\", 0);\\n      } else {\\n        this.lf.setItem(\\\"VersionSW\\\", 1);\\n      }\\n    },\\n    request_from_sw() {\\n      const pathName = window.location.pathname;\\n      this.registration.update();\\n      let request = new Request(`https://pwa.local:8080/${this.swName}`);\\n      const requestOptions = { method: \\\"GET\\\" };\\n      return fetch(request, requestOptions)\\n        .then(response => {\\n          navigator.serviceWorker\\n            .register(this.swName, { scope: pathName })\\n            .then(\\n              registration => {\\n                this.registration = registration;\\n              },\\n              err => {\\n                console.log(\\\"SW UPDATE_DEMO FAILED: \\\", err);\\n              }\\n            )\\n            .then(() => {\\n              this.service_worker = navigator.serviceWorker;\\n              return navigator.serviceWorker.ready;\\n            });\\n          return response;\\n          // return {\\n          //     request: request,\\n          //     response: response\\n          // };\\n        })\\n        .catch(error => {\\n          console.error(error);\\n          console.error(JSON.stringify(error));\\n          return {\\n            request: request,\\n            response: response\\n          };\\n        });\\n\\n      // window.location.reload();\\n    },\\n    send_new_sw() {\\n      this.$emit(\\\"updateRequest\\\");\\n      // this.newWorker.postMessage({action: 'skipWaiting'});\\n    },\\n    getSWClients() {\\n      if (navigator.serviceWorker.controller) {\\n        var messageChannel = new MessageChannel();\\n        messageChannel.port1.onmessage = function(event) {\\n          console.log(\\\"Response from the SW : \\\", event.data.message);\\n        };\\n\\n        console.log(\\\"Sending message to the service worker\\\");\\n        navigator.serviceWorker.controller.postMessage(\\n          {\\n            command: \\\"twoWayCommunication\\\",\\n            message: \\\"Hi, SW\\\"\\n          },\\n          [messageChannel.port2]\\n        );\\n      } else {\\n        console.log(\\\"No active ServiceWorker\\\");\\n      }\\n    },\\n    _navigateTo(url) {\\n      window.location = url;\\n    }\\n  }\\n};\\n</script>\\n\\n<style scoped>\\n</style>\\n\",\"import mod from \\\"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\\\"; export default mod; export * from \\\"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\\\"\",\"import { render, staticRenderFns } from \\\"./Update.vue?vue&type=template&id=14b8aa98&scoped=true&\\\"\\nimport script from \\\"./Update.vue?vue&type=script&lang=js&\\\"\\nexport * from \\\"./Update.vue?vue&type=script&lang=js&\\\"\\n\\n\\n/* normalize component */\\nimport normalizer from \\\"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\\\"\\nvar component = normalizer(\\n  script,\\n  render,\\n  staticRenderFns,\\n  false,\\n  null,\\n  \\\"14b8aa98\\\",\\n  null\\n  \\n)\\n\\nexport default component.exports\\n\\n/* vuetify-loader */\\nimport installComponents from \\\"!/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/runtime/installComponents.js\\\"\\nimport { VBtn } from 'vuetify/lib'\\nimport { VIcon } from 'vuetify/lib'\\ninstallComponents(component, {VBtn,VIcon})\\n\"]}","code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"update\"],{\"2e8c\":function(e,t,n){\"use strict\";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticStyle:{margin:\"0 auto\",padding:\"1rem\"}},[n(\"h1\",[e._v(e._s(e.pageTitle))]),n(\"h2\",{staticStyle:{\"text-align\":\"right\"}},[e.update?n(\"div\",{staticStyle:{color:\"dodgerblue\"}},[n(\"v-icon\",{staticStyle:{color:\"dodgerblue\",\"padding-right\":\"1rem\"}},[e._v(\"update\")]),e._v(\"Update\\n      available\\n    \")],1):e._e(),e.update?e._e():n(\"div\",{},[n(\"v-icon\",{staticStyle:{\"padding-right\":\"1rem\"}},[e._v(\"update\")]),e._v(\"No update available\\n    \")],1)]),e._m(0),n(\"div\",{staticStyle:{width:\"100%\",\"text-align\":\"center\"}},[n(\"v-btn\",{attrs:{round:\"\",dark:\"\",color:\"teal\"},on:{click:function(t){return e.toggleSW()}}},[e._v(\"Update SW\")]),n(\"v-btn\",{attrs:{round:\"\",dark:\"\",color:\"teal\"},on:{click:function(t){return e.unregister_sw()}}},[e._v(\"Unregister SW\")])],1)])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticStyle:{display:\"block\",\"text-align\":\"center\"}},[n(\"img\",{staticStyle:{display:\"block\",height:\"250px\",\"max-width\":\"100%\",margin:\"0 auto\"},attrs:{src:\"/img/horse.png\"}}),n(\"div\",{staticStyle:{display:\"block\",height:\"250px\",\"max-width\":\"100%\"},attrs:{id:\"imgElement\"}})])}],a=n(\"f499\"),s=n.n(a),o=(n(\"96cf\"),n(\"3b8d\")),c=(n(\"28ba\"),n(\"a002\")),l={name:\"Update\",data:function(){return{service_worker:null,newWorker:null,pageTitle:\"Update\",swName:\"sw.js\",lf:null,firebaseToken:null,update:!1}},computed:{},created:function(){var e=Object(o[\"a\"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(\"Creating Update, \",window.location.pathname),e.next=3,c[\"createInstance\"]({name:\"lf\"});case 3:return this.lf=e.sent,e.next=6,this.lf.getItem(\"VersionSW\");case 6:t=e.sent,null==t&&this.lf.setItem(\"VersionSW\",0),this.install_sw(),setTimeout(function(){var e=document.createElement(\"img\");e.src=\"/img/horse.png\",e.style=\"max-width: 100%; height: 250px;\",document.getElementById(\"imgElement\")&&document.getElementById(\"imgElement\").appendChild(e)},2500),window.addEventListener(\"beforeunload\",function(){console.log(\"BeforeUnload\"),n.update&&n.newWorker.postMessage({action:\"skipWaiting\"})});case 11:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{install_sw:function(){var e=Object(o[\"a\"])(regeneratorRuntime.mark(function e(){var t,n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=window.location.pathname,\"/\"!==t){e.next=3;break}return e.abrupt(\"return\");case 3:return e.next=5,this.lf.getItem(\"VersionSW\");case 5:n=e.sent,null==n&&(n=0),\"/update-without-skip-and-claim\"===t?(this.pageTitle=\"Default update\",this.swName=0===n?\"/sw-without-skip-and-claim.js\":\"/sw-without-skip-and-claim-2.js\"):\"/update-with-skip-no-claim\"===t?(this.pageTitle=\"Forced update\",this.swName=0===n?\"/sw-with-skip-no-claim.js\":\"/sw-with-skip-no-claim-2.js\"):\"/update-with-skip-and-claim\"===t?(this.pageTitle=\"Forced update & immediate control\",this.swName=0===n?\"/sw-with-skip-and-claim.js\":\"/sw-with-skip-and-claim-2.js\"):\"/single-client-update\"===t?(this.pageTitle=\"Single Client Update\",this.swName=0===n?\"/sw-single-client-update.js\":\"/sw-single-client-update-2.js\"):\"/multi-client-update\"===t&&(this.pageTitle=\"Multi Client Update\",this.swName=0===n?\"/sw-multi-client-update.js\":\"/sw-multi-client-update-2.js\"),navigator.serviceWorker.register(this.swName,{scope:t}).then(function(e){i.registration=e,i._updateListener()},function(e){console.log(\"SW UPDATE_DEMO FAILED: \",e)});case 9:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_updateListener:function(){var e=this;this.registration.waiting&&this.registration.active?(console.log(\"SW DETECTING UPDATE 1\"),this.update=!0,this.newWorker=registration.waiting):this.registration.addEventListener(\"updatefound\",function(){e.newWorker=e.registration.installing,e.newWorker.addEventListener(\"statechange\",function(){switch(e.newWorker.state){case\"installed\":window.addEventListener(\"beforeunload\",Object(o[\"a\"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:navigator.serviceWorker.controller?e.newWorker.postMessage({action:\"skipWaiting\"}):console.log(\"No active ServiceWorker\");case 1:case\"end\":return t.stop()}},t)}))),navigator.serviceWorker.controller&&(console.log(\"SW DETECTING UPDATE 2\"),e.update=!0);break;case\"activated\":navigator.serviceWorker.controller&&(console.log(\"SW ACTIVATED\"),setTimeout(function(){e.update=!1},2500)),e.lf.getItem(\"updating\");break}})})},unregister_sw:function(){this.registration.unregister().then(function(){console.log(\"Unregister\")})},toggleSW:function(){var e=Object(o[\"a\"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.lf.setItem(\"UAV\",!0),e.next=3,this.lf.getItem(\"VersionSW\");case 3:t=e.sent,1===t||null==t?this.lf.setItem(\"VersionSW\",0):this.lf.setItem(\"VersionSW\",1);case 5:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),request_from_sw:function(){var e=this,t=window.location.pathname;this.registration.update();var n=new Request(\"https://pwa.local:8080/\".concat(this.swName)),i={method:\"GET\"};return fetch(n,i).then(function(n){return navigator.serviceWorker.register(e.swName,{scope:t}).then(function(t){e.registration=t},function(e){console.log(\"SW UPDATE_DEMO FAILED: \",e)}).then(function(){return e.service_worker=navigator.serviceWorker,navigator.serviceWorker.ready}),n}).catch(function(e){return console.error(e),console.error(s()(e)),{request:n,response:response}})},send_new_sw:function(){this.$emit(\"updateRequest\")},getSWClients:function(){if(navigator.serviceWorker.controller){var e=new MessageChannel;e.port1.onmessage=function(e){console.log(\"Response from the SW : \",e.data.message)},console.log(\"Sending message to the service worker\"),navigator.serviceWorker.controller.postMessage({command:\"twoWayCommunication\",message:\"Hi, SW\"},[e.port2])}else console.log(\"No active ServiceWorker\")},_navigateTo:function(e){window.location=e}}},u=l,d=n(\"2877\"),g=n(\"6544\"),p=n.n(g),h=n(\"8336\"),m=n(\"132d\"),w=Object(d[\"a\"])(u,i,r,!1,null,\"14b8aa98\",null);t[\"default\"]=w.exports;p()(w,{VBtn:h[\"a\"],VIcon:m[\"a\"]})}}]);","extractedComments":[]}