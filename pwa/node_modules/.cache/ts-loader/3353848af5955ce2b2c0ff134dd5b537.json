{"remainingRequest":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/ts-loader/index.js??ref--13-3!/Users/ale/Documents/Bachproef/pwa-3/src/store/modules/products.ts","dependencies":[{"path":"/Users/ale/Documents/Bachproef/pwa-3/src/store/modules/products.ts","mtime":1556182772922},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/ts-loader/index.js","mtime":1545640398000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport _toConsumableArray from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.find\";\nimport { MagentoAPIService } from '@/services/MagentoAPIService';\nvar magentoAPIService = new MagentoAPIService();\nvar products = {\n  namespaced: true,\n  state: {\n    products: []\n  },\n  getters: {\n    product: function product(state) {\n      return function (sku) {\n        return state.products.find(function (product) {\n          return product.getSku() === sku;\n        });\n      };\n    },\n    allProducts: function allProducts(state) {\n      return state.products;\n    }\n  },\n  actions: {\n    fetchProduct: function () {\n      var _fetchProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(_ref, sku) {\n        var commit, product;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit;\n                _context.next = 3;\n                return magentoAPIService.getProductBySKU(sku);\n\n              case 3:\n                product = _context.sent;\n                commit('removeProduct', product);\n                commit('addProduct', product); // console.log('Fetch product done');\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetchProduct(_x, _x2) {\n        return _fetchProduct.apply(this, arguments);\n      }\n\n      return fetchProduct;\n    }(),\n    deleteProduct: function () {\n      var _deleteProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(_ref2, sku) {\n        var commit, product;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                commit = _ref2.commit;\n                _context2.next = 3;\n                return magentoAPIService.getProductBySKU(sku);\n\n              case 3:\n                product = _context2.sent;\n                commit('removeProduct', product);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function deleteProduct(_x3, _x4) {\n        return _deleteProduct.apply(this, arguments);\n      }\n\n      return deleteProduct;\n    }()\n  },\n  mutations: {\n    addProduct: function addProduct(state, product) {\n      state.products = [].concat(_toConsumableArray(state.products), [product]);\n    },\n    removeProduct: function removeProduct(state, product) {\n      console.log('REMOVING PRODUCT: ', product);\n      var index = state.products.findIndex(function (item) {\n        return item.getSku() === product.getSku();\n      });\n      console.log('Index: ', index);\n\n      if (index !== -1) {\n        state.products.splice(index, 1);\n      }\n    }\n  }\n}; // };\n\nexport default products;",{"version":3,"sources":["/Users/ale/Documents/Bachproef/pwa-3/src/store/modules/products.ts"],"names":[],"mappings":";;;;;AAEA,SAAQ,iBAAR,QAAgC,8BAAhC;AAEA,IAAM,iBAAiB,GAAG,IAAI,iBAAJ,EAA1B;AAEA,IAAM,QAAQ,GAAG;AAChB,EAAA,UAAU,EAAE,IADI;AAEhB,EAAA,KAAK,EACL;AACC,IAAA,QAAQ,EAAE;AADX,GAHgB;AAMhB,EAAA,OAAO,EACP;AACC,IAAA,OAAO,EAAE,iBAAC,KAAD;AAAA,aAAgB,UAAC,GAAD,EAAgB;AAExC,eAAO,KAAK,CAAC,QAAN,CAAe,IAAf,CAAoB,UAAC,OAAD;AAAA,iBAAsB,OAAO,CAAC,MAAR,OAAqB,GAA3C;AAAA,SAApB,CAAP;AACA,OAHQ;AAAA,KADV;AAKC,IAAA,WAAW,EAAE,qBAAC,KAAD;AAAA,aAAgB,KAAK,CAAC,QAAtB;AAAA;AALd,GAPgB;AAchB,EAAA,OAAO,EACP;AACO,IAAA,YADP;AAAA;AAAA;AAAA,qDACmC,GADnC;AAAA;AAAA;AAAA;AAAA;AAAA;AACqB,gBAAA,MADrB,QACqB,MADrB;AAAA;AAAA,uBAIwB,iBAAiB,CAAC,eAAlB,CAAkC,GAAlC,CAJxB;;AAAA;AAIQ,gBAAA,OAJR;AAKE,gBAAA,MAAM,CAAC,eAAD,EAAkB,OAAlB,CAAN;AACA,gBAAA,MAAM,CAAC,YAAD,EAAe,OAAf,CAAN,CANF,CAOE;;AAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AASO,IAAA,aATP;AAAA;AAAA;AAAA,uDASoC,GATpC;AAAA;AAAA;AAAA;AAAA;AAAA;AASsB,gBAAA,MATtB,SASsB,MATtB;AAAA;AAAA,uBAWwB,iBAAiB,CAAC,eAAlB,CAAkC,GAAlC,CAXxB;;AAAA;AAWQ,gBAAA,OAXR;AAYE,gBAAA,MAAM,CAAC,eAAD,EAAkB,OAAlB,CAAN;;AAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,GAfgB;AA8BhB,EAAA,SAAS,EACT;AACC,IAAA,UADD,sBACY,KADZ,EACwB,OADxB,EACwC;AAEtC,MAAA,KAAK,CAAC,QAAN,gCAAqB,KAAK,CAAC,QAA3B,IAAqC,OAArC;AACC,KAJH;AAMC,IAAA,aAND,yBAMe,KANf,EAM2B,OAN3B,EAM2C;AAEzC,MAAA,OAAO,CAAC,GAAR,CAAY,oBAAZ,EAAkC,OAAlC;AACA,UAAM,KAAK,GAAG,KAAK,CAAC,QAAN,CAAe,SAAf,CACd,UAAC,IAAD;AAAA,eAAmB,IAAI,CAAC,MAAL,OAAkB,OAAO,CAAC,MAAR,EAArC;AAAA,OADc,CAAd;AAEA,MAAA,OAAO,CAAC,GAAR,CAAY,SAAZ,EAAuB,KAAvB;;AACA,UAAI,KAAK,KAAK,CAAC,CAAf,EACA;AACC,QAAA,KAAK,CAAC,QAAN,CAAe,MAAf,CAAsB,KAAtB,EAA6B,CAA7B;AACA;AACD;AAhBF;AA/BgB,CAAjB,C,CAmDA;;AAGA,eAAe,QAAf","sourcesContent":["// tslint:disable-next-line:import-spacing\nimport {Product}           from '@/objects/Product';\nimport {MagentoAPIService} from '@/services/MagentoAPIService';\n\nconst magentoAPIService = new MagentoAPIService();\n\nconst products = {\n\tnamespaced: true,\n\tstate:\n\t{\n\t\tproducts: [],\n\t},\n\tgetters:\n\t{\n\t\tproduct: (state: any) => (sku: string) =>\n\t\t{\n\t\t\treturn state.products.find((product: Product) => product.getSku() === sku);\n\t\t},\n\t\tallProducts: (state: any) => state.products,\n\t},\n\tactions:\n\t{\n\t\tasync fetchProduct({commit}: any, sku: string)\n\t\t{\n\t\t\t// console.log(`Fetching product ${sku}...`);\n\t\t\tconst product = await magentoAPIService.getProductBySKU(sku);\n\t\t\tcommit('removeProduct', product);\n\t\t\tcommit('addProduct', product);\n\t\t\t// console.log('Fetch product done');\n\t\t},\n\t\tasync deleteProduct({commit}: any, sku: string)\n\t\t{\n\t\t\tconst product = await magentoAPIService.getProductBySKU(sku);\n\t\t\tcommit('removeProduct', product);\n\t\t},\n\t},\n\tmutations:\n\t{\n\t\taddProduct(state: any, product: Product)\n\t\t{\n\t\t\tstate.products = [...state.products, product];\n\t\t\t}\n\t\t,\n\t\tremoveProduct(state: any, product: Product)\n\t\t{\n\t\t\tconsole.log('REMOVING PRODUCT: ', product);\n\t\t\tconst index = state.products.findIndex(\n\t\t\t(item: Product) => item.getSku() === product.getSku());\n\t\t\tconsole.log('Index: ', index);\n\t\t\tif (index !== -1)\n\t\t\t{\n\t\t\t\tstate.products.splice(index, 1);\n\t\t\t}\n\t\t},\n\t},\n};\n\n// };\n\n\nexport default products;\n"],"sourceRoot":""}]}