{"remainingRequest":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js!/Users/ale/Documents/Bachproef/pwa-3/node_modules/ts-loader/index.js??ref--13-3!/Users/ale/Documents/Bachproef/pwa-3/src/services/MagentoAPIService.ts","dependencies":[{"path":"/Users/ale/Documents/Bachproef/pwa-3/src/services/MagentoAPIService.ts","mtime":1560359152585},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/ts-loader/index.js","mtime":1545640398000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ale/Documents/Bachproef/pwa-3/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport axios from 'axios';\nimport { Product } from './../objects/Product';\nexport var MagentoAPIService =\n/*#__PURE__*/\nfunction () {\n  // =================================================================================================================\n  // Getters & Setters\n  // =================================================================================================================\n  // Constructor\n  function MagentoAPIService() {\n    _classCallCheck(this, MagentoAPIService);\n\n    this.userAuthToken = '6gg6t6uaref3og36p6ukpqy507smw7c4';\n    this.headers = {\n      'Content-Type': 'application/json',\n      'Credentials': 'include',\n      'Authorization': \"Bearer \".concat(this.userAuthToken)\n    };\n    this.axiosInstance = axios.create({\n      headers: this.headers\n    });\n  } // =================================================================================================================\n  // Main methods\n  // -----------------------------------------------------------------------------------------------------------------\n  // Products\n  // public getProductMedia(mediaPath: string) {\n  //     const url = `${this.MEDIA_API}/product/${mediaPath}`;\n  //     return this.axiosInstance.get(url).then((response: ) => response.data);\n  // }\n\n\n  _createClass(MagentoAPIService, [{\n    key: \"getProductBySKU\",\n    value: function () {\n      var _getProductBySKU = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(sku) {\n        var url, response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                url = \"\".concat(MagentoAPIService.API_BASE, \"/product/\").concat(sku); // return this.axiosInstance.get(url)\n\n                _context.next = 3;\n                return fetch(url, {\n                  credentials: 'omit'\n                }).catch(function (err) {\n                  /* console.error(err); */\n                  return null;\n                });\n\n              case 3:\n                response = _context.sent;\n\n                if (!(!response || response.status < 200 && response.status >= 400)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", response);\n\n              case 6:\n                _context.next = 8;\n                return response.json().catch(function (err) {\n                  /* console.error(err); */\n                  return null;\n                });\n\n              case 8:\n                response = _context.sent;\n                _context.prev = 9;\n                return _context.abrupt(\"return\", Product.fromJSON(response));\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](9);\n                return _context.abrupt(\"return\", null);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[9, 13]]);\n      }));\n\n      function getProductBySKU(_x) {\n        return _getProductBySKU.apply(this, arguments);\n      }\n\n      return getProductBySKU;\n    }()\n  }, {\n    key: \"getProductList\",\n    value: function getProductList(amt) {\n      var url = \"\".concat(MagentoAPIService.PRODUCTS_API, \"/?searchCriteria[pageSize]=\").concat(amt);\n      return this.axiosInstance.get(url).then(function (response) {\n        console.log(response);\n        return response.data;\n      }).catch(function (error) {\n        console.log('MAGENTO ERROR: ', error);\n      });\n    }\n  }]);\n\n  return MagentoAPIService;\n}(); // =================================================================================================================\n// Data\n// TODO: Modify domain api base\n// ! API_BASE MAPPING TO NGINX \n// static API_BASE = 'https://vuestorefront-demo.phpro.be/rest/V1';\n\nMagentoAPIService.API_BASE = 'https://pwa.local:8080/api';\nMagentoAPIService.PRODUCTS_API = MagentoAPIService.API_BASE + '/products';\nMagentoAPIService.MEDIA_API = 'https://vuestorefront-demo.phpro.be/pub/media/catalog/product';",{"version":3,"sources":["/Users/ale/Documents/Bachproef/pwa-3/src/services/MagentoAPIService.ts"],"names":[],"mappings":";;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AAEA,SAAS,OAAT,QAAwB,sBAAxB;AAGA,WAAa,iBAAb;AAAA;AAAA;AAmBC;AACA;AAEA;AACA;AACA,+BAAA;AAAA;;AAbQ,SAAA,aAAA,GAAwB,kCAAxB;AACA,SAAA,OAAA,GACP;AACC,sBAAgB,kBADjB;AAEC,qBAAe,SAFhB;AAGC,wCAA2B,KAAK,aAAhC;AAHD,KADO;AAcP,SAAK,aAAL,GAAqB,KAAK,CAAC,MAAN,CAAa;AAAE,MAAA,OAAO,EAAE,KAAK;AAAhB,KAAb,CAArB;AACA,GA3BF,CA6BC;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AArCD;AAAA;AAAA;AAAA;AAAA;AAAA,+CAuC8B,GAvC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAyCQ,gBAAA,GAzCR,aAyCiB,iBAAiB,CAAC,QAzCnC,sBAyCuD,GAzCvD,GA0CE;;AA1CF;AAAA,uBA2CuB,KAAK,CAAC,GAAD,EAAM;AAAC,kBAAA,WAAW,EAAE;AAAd,iBAAN,CAAL,CAAkC,KAAlC,CAAwC,UAAA,GAAG,EAAG;AAAG;AAA0B,yBAAO,IAAP;AAAc,iBAAzF,CA3CvB;;AAAA;AA2CM,gBAAA,QA3CN;;AAAA,sBA4CM,CAAC,QAAD,IAAc,QAAQ,CAAC,MAAT,GAAkB,GAAlB,IAAyB,QAAQ,CAAC,MAAT,IAAkB,GA5C/D;AAAA;AAAA;AAAA;;AAAA,iDA4C8E,QA5C9E;;AAAA;AAAA;AAAA,uBA6CmB,QAAQ,CAAC,IAAT,GAAgB,KAAhB,CAAsB,UAAA,GAAG,EAAG;AAAG;AAA0B,yBAAO,IAAP;AAAc,iBAAvE,CA7CnB;;AAAA;AA6CE,gBAAA,QA7CF;AAAA;AAAA,iDAgDU,OAAO,CAAC,QAAR,CAAiB,QAAjB,CAhDV;;AAAA;AAAA;AAAA;AAAA,iDAkDU,IAlDV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mCAgEuB,GAhEvB,EAgEkC;AAEhC,UAAM,GAAG,aAAM,iBAAiB,CAAC,YAAxB,wCAAkE,GAAlE,CAAT;AACA,aAAO,KAAK,aAAL,CAAmB,GAAnB,CAAuB,GAAvB,EACL,IADK,CACA,UAAC,QAAD,EAAkB;AAEvB,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,eAAO,QAAQ,CAAC,IAAhB;AACA,OALK,EAML,KANK,CAMC,UAAC,KAAD,EAAe;AAErB,QAAA,OAAO,CAAC,GAAR,CAAY,iBAAZ,EAA+B,KAA/B;AACA,OATK,CAAP;AAWA;AA9EF;;AAAA;AAAA,I,CAEC;AACA;AACA;AACA;AACA;;AACO,iBAAA,CAAA,QAAA,GAAW,4BAAX;AACA,iBAAA,CAAA,YAAA,GAAe,iBAAiB,CAAC,QAAlB,GAA6B,WAA5C;AACA,iBAAA,CAAA,SAAA,GAAY,+DAAZ","sourcesContent":["import axios from 'axios';\n\nimport { Product } from './../objects/Product';\n\n\nexport class MagentoAPIService\n{\n\t// =================================================================================================================\n\t// Data\n\t// TODO: Modify domain api base\n\t// ! API_BASE MAPPING TO NGINX \n\t// static API_BASE = 'https://vuestorefront-demo.phpro.be/rest/V1';\n\tstatic API_BASE = 'https://pwa.local:8080/api';\n\tstatic PRODUCTS_API = MagentoAPIService.API_BASE + '/products';\n\tstatic MEDIA_API = 'https://vuestorefront-demo.phpro.be/pub/media/catalog/product';\n\n\tprivate userAuthToken: string = '6gg6t6uaref3og36p6ukpqy507smw7c4';\n\tprivate headers =\n\t\t{\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Credentials': 'include',\n\t\t\t'Authorization': `Bearer ${this.userAuthToken}`,\n\t\t};\n\tprivate axiosInstance: any;\n\t// =================================================================================================================\n\t// Getters & Setters\n\n\t// =================================================================================================================\n\t// Constructor\n\tconstructor()\n\t{\n\t\tthis.axiosInstance = axios.create({ headers: this.headers });\n\t}\n\n\t// =================================================================================================================\n\t// Main methods\n\n\t// -----------------------------------------------------------------------------------------------------------------\n\t// Products\n\t// public getProductMedia(mediaPath: string) {\n\t//     const url = `${this.MEDIA_API}/product/${mediaPath}`;\n\t//     return this.axiosInstance.get(url).then((response: ) => response.data);\n\t// }\n\n\tpublic async getProductBySKU(sku: string)\n\t{\n\t\tconst url = `${MagentoAPIService.API_BASE}/product/${sku}`;\n\t\t// return this.axiosInstance.get(url)\n\t\tlet response = await fetch(url, {credentials: 'omit'}).catch(err => { /* console.error(err); */ return null; });\n\t\tif (!response || (response.status < 200 && response.status >=400)) { return response; }\n\t\tresponse = await response.json().catch(err => { /* console.error(err); */ return null; });\n\t\ttry {\n\t\t\t\n\t\t\treturn Product.fromJSON(response);\n\t\t} catch (error) {\n\t\t\treturn null;\n\t\t}\n/* \t\t\t.then((response: any) =>\n\t\t{\n\t\t\treturn response.json().then((data: any) => \n\t\t\t{\n\t\t\t\treturn Product.fromJSON(data);\n\t\t\t}) */\n\t\t\t// let media = response.data.media_gallery_entries[0].file;\n\t\t\t// response.data.media_gallery_entries[0].file = MagentoAPIService.MEDIA_API + media;\n\n\t\t// }).catch(err => { console.log(err); return null; });\n\t}\n\n\tpublic getProductList(amt: number)\n\t{\n\t\tconst url = `${MagentoAPIService.PRODUCTS_API}/?searchCriteria[pageSize]=${amt}`;\n\t\treturn this.axiosInstance.get(url)\n\t\t\t.then((response: any) =>\n\t\t\t{\n\t\t\t\tconsole.log(response);\n\t\t\t\treturn response.data;\n\t\t\t})\n\t\t\t.catch((error: any) =>\n\t\t\t{\n\t\t\t\tconsole.log('MAGENTO ERROR: ', error);\n\t\t\t},\n\t\t\t);\n\t}\n\n\t// =================================================================================================================\n\t// Helper methods\n}\n"],"sourceRoot":""}]}