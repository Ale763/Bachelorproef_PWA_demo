{"remainingRequest":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/src/views/Category.vue?vue&type=style&index=0&id=00afe976&scoped=true&lang=css&","dependencies":[{"path":"/Users/ale/Documents/Bachproef/pwa-3/src/views/Category.vue","mtime":1560438645406},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.category {\n    /*max-width: 1000px;*/\n    margin: 0 auto;\n}\n\n@media only screen and (max-width: 960px) {\n    .my-offset-xs1 {\n        margin: 0 8.333333333333%;\n    }\n\n}\n",{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"Category.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"category\">\n    <v-container grid-list-md>\n        <v-layout v-if=\"offline\" row wrap align-center red style=\"width: 109%;\n    margin: 0px;\n    position: relative;\n    left: -16px;\n    color: white;\n    top: -16px;\">\n            <v-flex xs2 style=\"text-align: center;\">\n                <v-icon color=\"white\">cloud_off</v-icon>\n            </v-flex>\n            <v-flex xs10>\n                <h2>No network connection. Functionality is limited.</h2>\n            </v-flex>\n        </v-layout>\n        <!-- <h1>Category: {{ this.catId }}</h1> -->\n        <v-layout row fill-height wrap>\n\t\t\t<v-flex xs12 style=\"text-align:center;\">\n\n            <div v-if=\"!loaded\">Loading....</div>\n\t\t\t<div v-if=\"noProducts\">This category is empty</div>\n\t\t\t</v-flex>\n            <Product v-for=\"(product, index) in products\" v-if=\"product\" :sku=\"product.getSku()\" :key=\"product.getSku()\" style=\"display: inline-block;\" />\n        </v-layout>\n\n    </v-container>\n</div>\n</template>\n\n<script>\nimport Product from \"../components/Product\";\n\nimport\n{\n    MagentoAPIService\n}\nfrom \"../services/MagentoAPIService\";\n\nexport default\n{\n    name: \"Category\",\n    components:\n    {\n        Product,\n    },\n    props:\n    {},\n    data()\n    {\n        return {\n            catId: '',\n            categorIndex:\n            {\n                'Women-Tops':\n                {\n\t\t\t\t\t'products': ['WT09-XS-Purple', 'WT08-XS-Purple', 'WT07-XS-Green', 'WT06-S-Red',\n\t\t\t\t\t 'WT05-M-Orange', 'WT04-L-Blue']\n\n                },\n                'Women-Bottoms':\n                {\n                    'products': ['WSH12-28-Green', 'WSH11-28-Red', 'WSH10-28-Black', 'WSH09-28-Green',\n                        'WSH08-28-Purple', 'WSH07-28-Black'\n                    ]\n                },\n                'Men-Tops':\n                {\n                    'products': ['MT12-XL-Blue', 'MT11-M-Blue', 'MT10-XS-Yellow']\n                },\n                'Men-Bottoms':\n                {\n                    'products': ['MSH12-32-Red', 'MSH11-34-Black', 'MSH10-36-Green']\n                },\n                'Men-Accessories':\n                {\n                    'products': ['MA01', 'MA02']\n                },\n            },\n            offline: false,\n            loaded: false,\n\t\t\tproducts: null,\n\t\t\tnoProducts: false\n        }\n    },\n    computed:\n    {\n        /*         posts: function ()\n                {\n                    let posts = this.$store.getters['posts/allPosts'];\n                    // console.log(\"All Posts: \", posts);\n                    return posts;\n                },\n                products: function ()\n                {\n                    let index = this.categorIndex[this.catId]['products'];\n                    let filteredProducts = this.$store.getters['products/filterProducts'](index);\n                    if (filteredProducts == null)\n                    {\n                        return [];\n                    }\n                    this.loaded = true;\n                    return filteredProducts;\n                } */\n    },\n    created()\n    {\n        this.setPageCategory(this.$route.params.catName);\n        this.loadCategoryProducts();\n    },\n    methods:\n    {\n\t\ttestNoProducts()\n\t\t{\n\t\t\tif (this.loaded && (this.products == null || this.products === []))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n        getPageCategory()\n        {},\n        setPageCategory(category)\n        {\n            this.catId = category;\n        },\n        fetchProduct(sku)\n        {\n            return this.$store.dispatch('products/fetchProduct', sku)\n                .then((data) =>\n                {\n                    return data;\n                })\n                .catch((error) =>\n                {\n                    if (!navigator.onLine)\n                    {\n                    }\n                    else if (error.message === \"Offline\")\n                    {\n                        console.log(\"Network error: \", error)\n                    }\n                    else\n                        console.error('Fetch error', error);\n                });\n        },\n        async loadCategoryProducts()\n        {\n            let magentoService = new MagentoAPIService();\n            let result = [];\n            const categoryProducts = this.categorIndex[this.catId]['products'];\n            for (let productSKU of categoryProducts)\n            {\n\t\t\t\tlet product = await magentoService.getProductBySKU(productSKU);\n\t\t\t\tif (product)\n                \tresult.push(product);\n                // result.push(this.fetchProduct(productSKU));\n\t\t\t}\n\t\t\tthis.loaded = true;\n\t\t\tthis.products = result;\n\t\t\tthis.noProducts = this.testNoProducts();\n        }\n\n    },\n    watch:\n    {\n        $route(to, from)\n        {\n            this.setPageCategory(to.path.split('/category/')[1]);\n            this.loadCategoryProducts();\n            console.log(\"Category route change\");\n\n            let pageURL = this.$route.path;\n            fetch(pageURL).then(resp => console.log(\"Background fetched: \", pageURL)).catch(err => console.error(err));\n        }\n    }\n}\n</script>\n\n<style scoped>\n.category {\n    /*max-width: 1000px;*/\n    margin: 0 auto;\n}\n\n@media only screen and (max-width: 960px) {\n    .my-offset-xs1 {\n        margin: 0 8.333333333333%;\n    }\n\n}\n</style>\n"]}]}