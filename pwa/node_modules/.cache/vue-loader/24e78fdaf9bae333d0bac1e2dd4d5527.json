{"remainingRequest":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ale/Documents/Bachproef/pwa-3/src/components/Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ale/Documents/Bachproef/pwa-3/src/components/Product.vue","mtime":1558603695528},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ale/Documents/Bachproef/pwa-3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport {MagentoAPIService} from \"../services/MagentoAPIService\";\n\timport {Product} from \"../objects/Product\";\n\n\tconst magentoApiService = new MagentoAPIService();\n\n\texport default {\n\t\tname: \"product\",\n\t\tprops:\n\t\t{\n\t\t\tsku: String\n\t\t},\n\t\tdata: function ()\n\t\t{\n            return {\n\t            cached: false\n            }\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\tproduct()\n\t\t\t{\n\t\t\t\tlet product = this.$store.getters['products/product'](this.sku);\n\t\t\t\tif (product == null && this.sku != null)\n\t\t\t\t\tthis.fetchProduct(this.sku);\n\t\t\t\treturn product;\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\t_navigate()\n            {\n            \tconst path = `/product/${this.sku}`;\n            \tthis.$router.push({path, query:{t: +new Date()}});\n            },\n\t\t\tsearchCache(sku)\n\t\t\t{\n\t\t\t\treturn window.caches.open('products-cache')\n\t\t\t\t             .then(cache =>\n\t\t\t\t                   {\n\t\t\t\t\t                   // console.log(\"Searching keys for id\", sku);\n\t\t\t\t\t                   // console.log(\"KEYS\", keys);\n\t\t\t\t\t                   return cache.keys()\n\t\t\t\t\t                               .then(urls =>\n\t\t\t\t\t                                     {\n\t\t\t\t\t\t                                     for (let i = 0; i < urls.length; ++ i)\n\t\t\t\t\t\t                                     {\n\t\t\t\t\t\t\t                                     if (urls[i].url ===\n\t\t\t\t\t\t\t                                     `${MagentoAPIService.PRODUCTS_API}/${sku}`)\n\t\t\t\t\t\t\t\t                                     return true;\n\t\t\t\t\t\t                                     }\n\t\t\t\t\t\t                                     return false;\n\t\t\t\t\t                                     });\n\t\t\t\t                   }\n\t\t\t\t             )\n\t\t\t\t             .catch(error => {console.error(\"Error cached\", error)})\n\t\t\t},\n\t\t\tfetchProduct(sku)\n\t\t\t{\n\t\t\t\tthis.send_message_to_sw(this.sku);\n\t\t\t\tthis.$store.dispatch('products/fetchProduct', sku)\n\t\t\t\t    .then((data) =>\n\t\t\t\t          {\n\t\t\t\t\t          console.log('Fetch ok', data);\n\t\t\t\t          })\n\t\t\t\t    .catch((error) =>\n\t\t\t\t           {\n\t\t\t\t\t           console.error('Fetch error', error);\n\t\t\t\t           });\n\t\t\t},\n\t\t\tsend_message_to_sw(sku)\n\t\t\t{\n\t\t\t\tif ('serviceWorker' in navigator)\n\t\t\t\t{\n\t\t\t\t\tnavigator.serviceWorker.ready\n\t\t\t\t\t         .then(function (serviceWorkerRegistration)\n\t\t\t\t\t               {\n\t\t\t\t\t\t               // Let's see if you have a subscription already\n\t\t\t\t\t\t               return serviceWorkerRegistration.pushManager.getSubscription();\n\t\t\t\t\t               })\n\t\t\t\t\t         .then(function (subscription)\n\t\t\t\t\t               {\n\t\t\t\t\t\t               if (!subscription)\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t\t               // You do not have subscription\n\t\t\t\t\t\t               }\n\t\t\t\t\t\t               // You have subscription.\n\t\t\t\t\t\t               // Send data to service worker\n\t\t\t\t\t\t               console.log(\"Sending to SW...\");\n\t\t\t\t\t\t               navigator.serviceWorker.controller.postMessage(\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t\t               \"data\":\n\t\t\t\t\t\t\t               {\n\t\t\t\t\t\t\t\t               \"dev_comm\": true,\n\t\t\t\t\t\t\t\t               \"id\": sku\n\t\t\t\t\t\t\t               }\n\t\t\t\t\t\t               });\n\n\t\t\t\t\t               })\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeleteProductFromCache()\n\t\t\t{\n\t\t\t\tthis.send_message_to_sw(this.id);\n\t\t\t},\n\t\t\ttoggleCache()\n\t\t\t{\n\t\t\t\t// event.preventDefault();\n\t\t\t\tconsole.log(\"Firing for product: \", this.sku);\n\t\t\t\tif (this.cached)\n\t\t\t\t{\n\t\t\t\t\tthis.deleteProductFromCache()\n\t\t\t\t\t// this.cached = false;\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tthis.fetchProduct(this.id)\n\t\t\t\t\t// this.cached = true;\n\t\t\t\t}\n\t\t\t\tconsole.log(`Product ${this.id}: Cache = ${this.cached}`);\n\t\t\t\t// this.cached = !this.cached;\n\t\t\t}\n\n\t\t},\n\t\tcreated()\n\t\t{\n\t\t\treturn this.searchCache(this.sku)\n\t\t\t           .then(result =>\n\t\t\t                 {\n\t\t\t\t                 // console.log(\"Search from cache: \", result);\n\t\t\t\t                 if (result != null)\n\t\t\t\t\t                 this.cached = result;\n\t\t\t                 })\n\t\t\t// this.$store.dispatch('posts/fetchPost', this.id);\n\t\t}\n\t}\n",{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-flex xs12 sm6 lg4>\n    <a v-if=\"product\" v-on:click=\"_navigate()\" style=\"color: inherit\">\n        <img :src=\"product.getMainMedia()\" style=\"max-width:400px;width: 100%; max-height: 600px;\">\n        <div>\n            <h3>{{ product.getName() }}</h3>\n            <span style=\"display: inline-block;\">${{ product.getPrice()}}</span>\n            <div style=\"display: inline-block;float: right;position: relative;top: -1.5rem;\">\n                <v-btn fab\n                       dark\n                       small\n                       color=\"pink\">\n                    <v-icon dark>favorite</v-icon>\n                </v-btn>\n                <v-btn fab\n                       dark\n                       small\n                       color=\"teal\">\n                    <v-icon dark>add_shopping_cart</v-icon>\n                </v-btn>\n            </div>\n\n\n\n\n        </div>\n<!--        <span v-if=\"product.hasTierPrice()\">${{ product.getTierPrice()}}</span>-->\n<!--        <v-switch v-model=\"cached\"-->\n<!--                  @click.native=\"toggleCache();\"-->\n<!--                  :label=\"`Product cached: ${cached.toString()}`\"></v-switch>-->\n    </a>\n    </v-flex>\n</template>\n\n<script>\n\timport {MagentoAPIService} from \"../services/MagentoAPIService\";\n\timport {Product} from \"../objects/Product\";\n\n\tconst magentoApiService = new MagentoAPIService();\n\n\texport default {\n\t\tname: \"product\",\n\t\tprops:\n\t\t{\n\t\t\tsku: String\n\t\t},\n\t\tdata: function ()\n\t\t{\n            return {\n\t            cached: false\n            }\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\tproduct()\n\t\t\t{\n\t\t\t\tlet product = this.$store.getters['products/product'](this.sku);\n\t\t\t\tif (product == null && this.sku != null)\n\t\t\t\t\tthis.fetchProduct(this.sku);\n\t\t\t\treturn product;\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\t_navigate()\n            {\n            \tconst path = `/product/${this.sku}`;\n            \tthis.$router.push({path, query:{t: +new Date()}});\n            },\n\t\t\tsearchCache(sku)\n\t\t\t{\n\t\t\t\treturn window.caches.open('products-cache')\n\t\t\t\t             .then(cache =>\n\t\t\t\t                   {\n\t\t\t\t\t                   // console.log(\"Searching keys for id\", sku);\n\t\t\t\t\t                   // console.log(\"KEYS\", keys);\n\t\t\t\t\t                   return cache.keys()\n\t\t\t\t\t                               .then(urls =>\n\t\t\t\t\t                                     {\n\t\t\t\t\t\t                                     for (let i = 0; i < urls.length; ++ i)\n\t\t\t\t\t\t                                     {\n\t\t\t\t\t\t\t                                     if (urls[i].url ===\n\t\t\t\t\t\t\t                                     `${MagentoAPIService.PRODUCTS_API}/${sku}`)\n\t\t\t\t\t\t\t\t                                     return true;\n\t\t\t\t\t\t                                     }\n\t\t\t\t\t\t                                     return false;\n\t\t\t\t\t                                     });\n\t\t\t\t                   }\n\t\t\t\t             )\n\t\t\t\t             .catch(error => {console.error(\"Error cached\", error)})\n\t\t\t},\n\t\t\tfetchProduct(sku)\n\t\t\t{\n\t\t\t\tthis.send_message_to_sw(this.sku);\n\t\t\t\tthis.$store.dispatch('products/fetchProduct', sku)\n\t\t\t\t    .then((data) =>\n\t\t\t\t          {\n\t\t\t\t\t          console.log('Fetch ok', data);\n\t\t\t\t          })\n\t\t\t\t    .catch((error) =>\n\t\t\t\t           {\n\t\t\t\t\t           console.error('Fetch error', error);\n\t\t\t\t           });\n\t\t\t},\n\t\t\tsend_message_to_sw(sku)\n\t\t\t{\n\t\t\t\tif ('serviceWorker' in navigator)\n\t\t\t\t{\n\t\t\t\t\tnavigator.serviceWorker.ready\n\t\t\t\t\t         .then(function (serviceWorkerRegistration)\n\t\t\t\t\t               {\n\t\t\t\t\t\t               // Let's see if you have a subscription already\n\t\t\t\t\t\t               return serviceWorkerRegistration.pushManager.getSubscription();\n\t\t\t\t\t               })\n\t\t\t\t\t         .then(function (subscription)\n\t\t\t\t\t               {\n\t\t\t\t\t\t               if (!subscription)\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t\t               // You do not have subscription\n\t\t\t\t\t\t               }\n\t\t\t\t\t\t               // You have subscription.\n\t\t\t\t\t\t               // Send data to service worker\n\t\t\t\t\t\t               console.log(\"Sending to SW...\");\n\t\t\t\t\t\t               navigator.serviceWorker.controller.postMessage(\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t\t               \"data\":\n\t\t\t\t\t\t\t               {\n\t\t\t\t\t\t\t\t               \"dev_comm\": true,\n\t\t\t\t\t\t\t\t               \"id\": sku\n\t\t\t\t\t\t\t               }\n\t\t\t\t\t\t               });\n\n\t\t\t\t\t               })\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeleteProductFromCache()\n\t\t\t{\n\t\t\t\tthis.send_message_to_sw(this.id);\n\t\t\t},\n\t\t\ttoggleCache()\n\t\t\t{\n\t\t\t\t// event.preventDefault();\n\t\t\t\tconsole.log(\"Firing for product: \", this.sku);\n\t\t\t\tif (this.cached)\n\t\t\t\t{\n\t\t\t\t\tthis.deleteProductFromCache()\n\t\t\t\t\t// this.cached = false;\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tthis.fetchProduct(this.id)\n\t\t\t\t\t// this.cached = true;\n\t\t\t\t}\n\t\t\t\tconsole.log(`Product ${this.id}: Cache = ${this.cached}`);\n\t\t\t\t// this.cached = !this.cached;\n\t\t\t}\n\n\t\t},\n\t\tcreated()\n\t\t{\n\t\t\treturn this.searchCache(this.sku)\n\t\t\t           .then(result =>\n\t\t\t                 {\n\t\t\t\t                 // console.log(\"Search from cache: \", result);\n\t\t\t\t                 if (result != null)\n\t\t\t\t\t                 this.cached = result;\n\t\t\t                 })\n\t\t\t// this.$store.dispatch('posts/fetchPost', this.id);\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}